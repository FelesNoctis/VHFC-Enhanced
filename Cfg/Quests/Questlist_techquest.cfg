Ch1_hiddencontent_and_stuff
{
	Chapter=0
	Stage0
	{
		State=Inactive	
		OnItemGot:galaxis_utikalauz
		{
			AddStoryData=galaxyguide_hc_done
		}
		OnItemGot:dr_jekyl_tincture
		{
			AddStoryData=Dr_Jekyl_tincture
		}
		OnItemGot:Diamond_Essence
		{
			AddStoryData=Knowledge_of_the_dead_kecske
		}
		OnItemGot:VH2harpyfeather_trophy
		{
			AddStoryData=VH2harpyfeather_trophy
		}
		OnItemGot:Essence_of_the_rock
		{
			AddStoryData=Essence_of_the_rock
		}
		OnItemGot:Rune_stone_of_carcas_pit
		{
			AddStoryData=Rune_stone_of_carcas_pit
		}
		OnItemGot:Spiritwalker_bone_relic
		{
			AddStoryData=Spiritwalker_bone_relic
		}		
		OnItemGot:cavern_ring
		{
			AddStoryData=Vh2cavern_ring
		}
		OnItemGot:gold_fish
		{
			AddStoryData=Gold_fish
		}
		OnItemGot:don_quijote_spear
		{
			AddStoryData=Don_Quijote_Spear
			AddStoryData=Resistance_Relic05
		}
		OnItemGot:mushroom_diploma
		{
			AddStoryData=Mushroom_diploma
		}
		OnItemGot:hannibal_mask
		{
			AddStoryData=Hannibal_mask
		}
		OnItemGot:Superegg
		{
			AddStoryData=easteregg_hc_done
		}
		OnItemGot:Superegg_Rat
		{
			AddStoryData=superliver_hc_done
		}
		OnItemGot:gocsortos_kard
		{
			AddStoryData=gocsortoskard_hc_done
		}
		OnItemGot:weapon_oil
		{
			AddStoryData=weaponoil_hc_done
		}
		OnItemGot:Excalibur
		{
			AddStoryData=excalibur_hc_done
		}
		OnItemGot:borislavs_Scepter
		{
			AddStoryData=borislavsceptre_hc_done
		}
		OnItemGot:Fifth_element
		{
			AddStoryData=5thelement_hc_done			
		}
		OnItemGot:Trophy_Werewolf_Spiritstone
		{
			AddStoryData=vrikolakgift_hc_done			
		}
		OnItemGot:Domovoys_sword
		{
			AddStoryData=domovoysword_hc_done
		}
		OnItemGot:Zorros_Hat
		{
			AddStoryData=zorrohat_hc_done
		}
		OnItemGot:fifth_element
		{
			AddStoryData=5thelement_hc_done
		}
		OnItemGot:Citymans_hat
		{
			AddStoryData=darkohat_hc_done
		}
		OnItemGot:The_One_ring
		{
			AddStoryData=theonering_hc_done
		}
		OnItemGot:mutant_fish
		{
			AddStoryData=mutantfish_hc_done
		}
		OnItemGot:Junk_item
		{
			AddStoryData=bootfishing_hc_done
		}
		OnItemGot:Necronomicon
		{
			AddStoryData=Resistance_Relic12
		}
		
		OnStoryData:madman_artifact_given,keep
		{
			AddLoot=irrational_essence_loot,terep_falu,Village_orult,critter
		}
	}
}

Ch1_ResistanceRelicStuff
{
	Chapter=0
	Stage0
	{
		State=Inactive	
		OnItemGot:Golden_Spyglass
		{
			AddStoryData=Vh3Resistance_Relic05			
		}
		OnItemGot:Orichalcum_Chesspiece
		{
			AddStoryData=Vh3Resistance_Relic07			
		}
		OnItemGot:Jackmans_Crossbow
		{
			AddStoryData=Vh3Resistance_Relic10			
		}
	}
}

ch1_kill_bunny_w_bunnyslayer_hc
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:gocsortoskard_hc_done,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSoldierKilledName:BloodRabbit,terep_ink_monsta
		{
			AddStoryData=bunnyslayer_hc_done
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}

Ch1_fenyves_wishingwell
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnItemGot:ancient_coin
		{
			EnableTrigger=terep_fenyves,Wishing_well_approach,true
			AddStoryData=ancient_coin_got
		}
		OnStoryData:wishing_well_got_info,keep
		{
			EnableTrigger=terep_fenyves,Wishing_well_approach,false
		}
		OnStoryData:wishing_well_used,keep
		{
			RemoveArtifact=ancient_coin
			SetStage=5
		}
	}
	Stage5
	{
		State=Hidden
	}
}
Ch1_fenyves_hiddentreasure
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Hidden_treasure_done1,keep
		{
			AddLoot=Hiddentreasure_loot,terep_fenyves,Hiddentreasure_pos,dummy
			SetStage=5
		}
		OnStoryData:Hidden_treasure_done2,keep
		{
			AddLoot=Hiddentreasure_loot,terep_fenyves,Hiddentreasure_pos,dummy
			EnableTrigger=terep_falu,kihallgatas1,false
			EnableTrigger=terep_falu,kihallgatas2,true
			SetStage=5
		}
	}
	Stage5
	{
		State=Hidden
	}
}
Ch1_fenyves_buzafarkas
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:scarecrow_start,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			DelayedSpawnMonster=Vrikolak_champ_buza,Vrikolak_champ_buza,terep_fenyves,buza_farkas1
			DelayedSpawnMonster=Vrikolak_champ_buza,Vrikolak_champ_buza,terep_fenyves,buza_farkas2
			DelayedSpawnMonster=Vrikolak_champ_buza,Vrikolak_champ_buza,terep_fenyves,buza_farkas3
			DelayedSpawnMonster=Vrikolak_champ_buza,Vrikolak_champ_buza,terep_fenyves,buza_farkas4
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch1_fenyves_nameless_wisp
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:wisp_fire,keep
		{
			AddLoot=Nameless_wisp_loot1,terep_fenyves,Nameless_wisp_pos,dummy
			AddStoryData=namelesswisp_hc_done
			SetStage=5
		}
		OnStoryData:wisp_life,keep
		{
			AddLoot=Nameless_wisp_loot2,terep_fenyves,Nameless_wisp_pos,dummy
			AddStoryData=namelesswisp_hc_done
			SetStage=5
		}
		OnStoryData:Nameless_megveszett,keep
		{
			PlayEffect=willow\willow_tansformi.N2E,terep_fenyves,dummy,Nameless_wisp_pos
			SpawnMonster=Nameless_wisp_harci,Nameless_wisp_harci,terep_fenyves,Nameless_wisp_pos
			SetStage=5
		}
	}
	Stage5
	{
		State=Hidden
	}
}
Ch1_Borislav_statues
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:three_villagegem_done,keep
		{
			AddLoot=statuekey_loot,terep_falu,statuekey_lootpos,dummy
		}
		OnItemGot:statuekey
		{
			AddStoryData=StatueKey
		}
		OnStoryData:three_inkszoborgem_done1,keep
		{
			SetVariable=inkstatues_inactive,1,add
		}
		OnStoryData:three_inkszoborgem_done2,keep
		{
			SetVariable=inkstatues_inactive,1,add
		}
		OnVariableChanged:inkstatues_inactive,2
		{
			AddStoryData=Nomore_knockback
			SetPlayerActive=terep_ink_szobor,knockbacker,false
			EnableTrigger=terep_ink_szobor,Borislav_treasure_cutscene,true
		}
		OnSoldierKilledName:Magus_boss3,terep_ink_szobor
		{
			AddStoryData=TH_Boss_eliminated
		}
		OnStoryData:Borislav_hiddentreasure_done,keep
		{
			AddLoot=Borislavs_Scepter_loot,terep_ink_szobor,Scepter_lootpos,dummy
			RemoveArtifact=statuekey
			SetStage=5
		}
	}
	Stage5
	{
		State=Hidden
	}
}
Ch1_nagyerdo_red_button
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Red_Button1,keep
		{
			EnableTrigger=terep_nagyerdo,red_button_leave,true
		}
		OnStoryData:red_button,keep
		{
			EnableTrigger=terep_nagyerdo,red_button_leave,false
			DelayedSpawnMonster=Olomkatona_lovos,Olomkatona_lovos,terep_nagyerdo,Red_Button_monster1,Unnamed player 0,Olomkatona_redbutton
			DelayedSpawnMonster=Olomkatona_lovos,Olomkatona_lovos,terep_nagyerdo,Red_Button_monster2,Unnamed player 0,Olomkatona_redbutton
			DelayedSpawnMonster=Olomkatona_lovos,Olomkatona_lovos,terep_nagyerdo,Red_Button_monster3,Unnamed player 0,Olomkatona_redbutton
			DelayedSpawnMonster=Olomkatona_lovos,Olomkatona_lovos,terep_nagyerdo,Red_Button_monster4,Unnamed player 0,Olomkatona_redbutton
			DelayedSpawnMonster=Olomkatona_lovos,Olomkatona_lovos,terep_nagyerdo,Red_Button_monster5,Unnamed player 0,Olomkatona_redbutton
			DelayedSpawnMonster=Olomkatona_lovos,Olomkatona_lovos,terep_nagyerdo,Red_Button_monster6,Unnamed player 0,Olomkatona_redbutton
			DelayedSpawnMonster=Olomkatona_lovos,Olomkatona_lovos,terep_nagyerdo,Red_Button_monster7,Unnamed player 0,Olomkatona_redbutton
			DelayedSpawnMonster=Olomkatona_lovos,Olomkatona_lovos,terep_nagyerdo,Red_Button_monster8,Unnamed player 0,Olomkatona_redbutton
		}
		OnSoldierGroupKilled:Olomkatona_redbutton,terep_nagyerdo
		{
			AddLoot=VH_Remastered_gold_fix,terep_nagyerdo,Red_button_lootpos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_nagyerdo,Red_button_lootpos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_nagyerdo,Red_button_lootpos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_nagyerdo,Red_button_lootpos,dummy
			AddLoot=1_champion_elite_fixloot,terep_nagyerdo,Red_button_lootpos,dummy
			AddLoot=1_champion_elite_fixloot,terep_nagyerdo,Red_button_lootpos,dummy
			AddLoot=1_champion_elite_fixloot,terep_nagyerdo,Red_button_lootpos,dummy
			SetStage=5
		}
	}
	Stage5
	{
		State=Hidden
	}
}
Ch1_Nagypok_triggerletilto
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:spider_boss_camera1,keep
		{
			EnableTrigger=terep_cave,spider_boss_camera2,false
			SetStage=5
		}
		OnStoryData:spider_boss_camera2,keep
		{
			EnableTrigger=terep_cave,spider_boss_camera1,false
			SetStage=5
		}
	}
	Stage5
	{
		State=Hidden
	}
}

Ch1_storydata_cleaner01
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_gyarnegyed
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			AddStoryData=Act1_Ch1_delete_storydata
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}

Ch2_Shopkeeper_attackers
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Shopkeeper_action_done,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Active
		OnSet
		{
			SetGangActive=terep_gyarnegyed,shopkeeper_attackers,true
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
		OnSet
		{
			AddStoryData=Shopkeeper_action_end
		}
	}
}

Ch2_gyarnegyed_ridle_wisp
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Whisp_1_loot,keep
		{
			AddLoot=Fifth_element_loot,terep_gyarnegyed,Ridle_wisp_pos,dummy
			SetStage=5
		}
		OnStoryData:Whisp_1_harc,keep
		{
			PlayEffect=willow\willow_tansformi.N2E,terep_gyarnegyed,dummy,Ridle_wisp_pos
			SpawnMonster=Nameless_wisp_harci,Nameless_wisp_harci,terep_gyarnegyed,Ridle_wisp_pos
			SetStage=5
		}
	}
	Stage5
	{
		State=Hidden
	}
}
Ch2_Blood_rabbit
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Blood_rabbit_attack,keep
		{
			SetPlayerActive=terep_ink_monsta,BloodRabbit,true
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSoldierKilledName:BloodRabbit,terep_ink_monsta
		{
			AddStoryData=BloodRabbit_beaten
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch2_Monsters_hunting
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Monsters_hunting_begin,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			SetPlayerActive=terep_viztisztito_1,Patkanyos,true
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}

Ch2_Banterlejatszo_2
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Aktivalo2,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			EnableTrigger=terep_viztisztito_2,Katarina_past,true
		}
	}
}
Ch2_kiserletitelep_action
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Energy_is_active,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			EnableWaypoint=terep_csatorna_kiserletitelep;Ink_gate_KT
			EnableEntrance=terep_csatorna_kiserletitelep,Entrance_to_vezerlo,true
			EnableTrigger=terep_csatorna_kiserletitelep,More_inactive_soldier,false
			EnableTrigger=terep_csatorna_kiserletitelep,Inactive_controller,false
			EnableTrigger=terep_csatorna_kiserletitelep,Inactive_Inkgate,false
			SetPlayerActive=terep_csatorna_kiserletitelep,Inactive,true
		}
	}
}
Ch2_Whisperers_eccence
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Essence_loot_megvan,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			AddLoot=Wisp_essence_loot,terep_viztisztito_2,Whisperer_loot,dummy
			AddLoot=Wisp_essence_loot,terep_viztisztito_2,Whisperer_loot,dummy
			AddLoot=Essence_loot,terep_viztisztito_2,Whisperer_loot,dummy
			AddLoot=Essence_loot,terep_viztisztito_2,Whisperer_loot,dummy
			AddLoot=Essence_loot,terep_viztisztito_2,Whisperer_loot,dummy
			AddLoot=Essence_loot,terep_viztisztito_2,Whisperer_loot,dummy
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch2_Harpy_ghosts
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Harpyghost1,keep
		{
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn11
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn11
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn12
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn12
		}
		OnStoryData:Harpyghost2,keep
		{
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn21
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn21
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn22
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn22
		}
		OnStoryData:Harpyghost3,keep
		{
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn31
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn31
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn32
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn32
		}
		OnStoryData:Harpyghost4,keep
		{
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn41
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn41
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn41
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn42
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn42
			SpawnMonster=Harpy_ghost_min,Harpy_ghost_min,terep_csatorna_nekro,spawn42
		}
		OnStoryData:Harpyghost5,keep
		{
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn51
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn51
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn51
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn52
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn52
			SpawnMonster=Harpy_ghost_min,Harpy_ghost_min,terep_csatorna_nekro,spawn52
		}
		OnStoryData:Harpyghost6,keep
		{
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn61
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn61
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn61
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn62
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn62
			SpawnMonster=Harpy_ghost_min,Harpy_ghost_min,terep_csatorna_nekro,spawn62
		}
		OnStoryData:Harpyghost7,keep
		{
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn71
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn71
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn71
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn72
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn72
			SpawnMonster=Harpy_ghost_min,Harpy_ghost_min,terep_csatorna_nekro,spawn72
		}
		OnStoryData:Harpyghost8,keep
		{
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn81
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn81
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn81
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn82
			SpawnMonster=Harpy_ghost_min,Harpy_ghost_min,terep_csatorna_nekro,spawn82
			SpawnMonster=Harpy_ghost_min,Harpy_ghost_min,terep_csatorna_nekro,spawn82
		}
		OnStoryData:Harpyghost9,keep
		{
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn91
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn91
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn91
			SpawnMonster=Harpy_ghost,Harpy_ghost,terep_csatorna_nekro,spawn92
			SpawnMonster=Harpy_ghost_min,Harpy_ghost_min,terep_csatorna_nekro,spawn92
			SpawnMonster=Harpy_ghost_min,Harpy_ghost_min,terep_csatorna_nekro,spawn92
		}
	}
}
Ch3_Gargoyle_activator
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:activate_gargoyles,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			SetPlayerActive=terep_Belvaros,gargoyles,true
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}

Ch3_BorislavsTreasure
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Borislav_gate_opened,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		Onset
		{
			EnableEntrance=terep_belvaros,Entrance_to_statueink,true
		}
		OnStoryData:Borislav_gate_closed,keep
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Inactive
		OnSet
		{
			EnableEntrance=terep_belvaros,Entrance_to_statueink,false
		}
	}
}
Ch3_oldtown_ridleurban_wisp
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Wisp3_loot,keep
		{
			AddLoot=galaxis_utikalauz_loot,terep_belvaros,Urban_wisp_pos,dummy
			SetStage=5
		}
		OnStoryData:Wisp3_attack,keep
		{
			PlayEffect=willow\willow_tansformi.N2E,terep_belvaros,dummy,Urban_wisp_pos
			SpawnMonster=Nameless_wisp_harci,Nameless_wisp_harci,terep_belvaros,Urban_wisp_pos
			SetStage=5
		}
	}
	Stage5
	{
		State=Hidden
	}
}
Ch3_The_Shewer_cleaner
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Secret_sewer_gate,keep
		{
			EnableEntrance=terep_csatorna_tudos,Entrance_to_secretsewer,true
		}
	}
}

Ch4_hidden_content_checker_Jack
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Hidcont_Jack_checker,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnMapChanged:terep_Lair
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Inactive
		OnSet
		{
			HasStoryData:prison_door20,equal,0
			{
				AddStoryData=Jack_not_free
				RemoveStoryData=Jack_door_active
			}
			SetStage=15
		}
	}
	Stage15
	{
		State=Hidden
	}
}
Ch4_Jack_the_ripper
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_csatorna_prison
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:BNT_POI02_Jack_the_ripper,keep
		{
			HasStoryData:prison_doors02_activated,equal,1
			{
				AddStoryData=Jack_door_active
			}
		}
		OnStoryData:prison_doors02_activated,keep
		{
			HasStoryData:BNT_POI02_Jack_the_ripper,equal,1
			{
				AddStoryData=Jack_door_active
			}
		}
		OnStoryData:prison_door20,keep
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch4_Hulk_fight
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_csatorna_prison
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSoldierGroupKilled:Hulk_guards,terep_csatorna_prison
		{
			AddStoryData=Hulk_guards_dead
			SetStage=10
		}
	}
	Stage10
	{
		State=Inactive
		OnStoryData:Hulk_is_free,keep
		{
			SetStage=15
		}
	}
	Stage15
	{
		State=Inactive
		OnSet
		{
			SetGangActive=terep_csatorna_prison,Hulk,true
		}
		OnSoldierKilledName:Prisoner_Hulk,terep_csatorna_prison
		{
			SetStage=20
		}
	}
	Stage20
	{
		State=Hidden
	}
}
Ch4_The_vampire_lord
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Master_of_Doors_cutscene_done,keep
		{
			AddStoryData=RM_Vampire_lord_completed
			SetStage=5
		}
	}
	Stage5
	{
		State=Hidden
	}
}
Ch4_Technikai_quest01
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:First_mission_start,keep
		{
			SetVariable=PoP_storydata,1,add
		}
		OnStoryData:Telsa_quest_done,keep
		{
			SetVariable=PoP_storydata,1,add
		}
		OnVariableChanged:PoP_storydata,2
		{
			AddStoryData=PoP_quest_available
			SetStage=5
		}
	}
	Stage5
	{
		State=Hidden
	}
}

Ch4_Szerpentin_ghoul
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_szerpentin
		{
			SetStage=2
		}
	}
	Stage2
	{
		State=Inactive
		OnStoryData:alms_for_ghoul,keep
		{
			SetStage=5
		}
		OnStoryData:dinner_for_ghoul,keep
		{
			SetStage=10
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			# Robival megbeszélni!!!
			#MoveNPC=terep_szerpentin,szerpentin_ghoul,terep_NPC_gyujto2,szerpentin_ghoul_pos
			SetStage=15
		}
	}
	Stage10
	{
		State=Inactive
		OnSet
		{
			SetPlayerFaction=terep_szerpentin,Ghoul_player,1
			SetStage=15
		}
	}
	Stage15
	{
		State=Hidden
	}
}
Ch1_The_massacred_caravan
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_szerpentin
		{
			SetStage=2
		}
	}
	Stage2
	{
		State=Inactive
		OnSet
		{
			Mark=completed,terep_szerpentin,NPC_caravan_leader,npc,main
			Mark=completed,terep_szerpentin,szerpentin_outlaw_leader,soldier,main
		}
		OnStoryData:massacred_caravan_dialog_done,keep
		{
			Mark=none,terep_szerpentin,NPC_caravan_leader,npc,main
		}
		OnStoryData:Fight_with_outlaws,keep
		{
			SetStage=5
		}
		OnStoryData:trade_with_outlaws,keep
		{
			SetStage=10
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			SetPlayerFaction=terep_szerpentin,outlaws,1
			SetPlayerActive=terep_szerpentin,outlaws,true
			Mark=none,terep_szerpentin,szerpentin_outlaw_leader,soldier,main
			SpawnMonster=Rat_05_fejszes,Rat_05_fejszes,terep_szerpentin,Rat_outlaw_pos1
			SpawnMonster=rat_csakany,rat_csakany,terep_szerpentin,Rat_outlaw_pos2
			SpawnMonster=rat_csakany_vet,rat_csakany_vet,terep_szerpentin,Rat_outlaw_pos3
			SpawnMonster=Rat_05_fejszes,Rat_05_fejszes,terep_szerpentin,Rat_outlaw_pos1
			SpawnMonster=Rat_05_fejszes,Rat_05_fejszes,terep_szerpentin,Rat_outlaw_pos2
			SpawnMonster=rat_csakany,rat_csakany,terep_szerpentin,Rat_outlaw_pos3
			SpawnMonster=rat_csakany,rat_csakany,terep_szerpentin,Rat_outlaw_pos1
			SpawnMonster=Rat_05_fejszes_vet,Rat_05_fejszes_vet,terep_szerpentin,Rat_outlaw_pos2
			SpawnMonster=Rat_05_fejszes,Rat_05_fejszes,terep_szerpentin,Rat_outlaw_pos3
		}
		OnSoldierKilled:szerpentin_outlaw_leader,terep_szerpentin
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
		OnSet
		{
			Mark=none,terep_szerpentin,szerpentin_outlaw_leader,soldier,main
		}
	}
}
Ch4_Szerpentine_POI
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Vampire_mission_available,keep
		{
			SendRadioReport=Commander_Petrov,Vampire_lord
		}
		OnStoryData:Katarina_cold_active,keep
		{
			EnableTrigger=terep_szerpentin,BNT_POI03_Katarina_cold,true
		}
		OnItemGot:Mushroom_diploma
		{
			EnableTrigger=terep_szerpentin,BNT_POI03_Mushroom_experties,true
		}
		OnStoryData:Steal_the_armor,keep
		{
			SetObjectVisible=terep_szerpentin,Altair_sword,false
		}
		OnStoryData:Csort_breathes_quest_done,keep
		{
			EnableTrigger=terep_szerpentin,BNT_POI03_backtobusiness,true
		}
		OnStoryData:rukh_pole,keep
		{
			AddLoot=VH_Remastered_Fix_loot,terep_szerpentin,rukh_pole_position,dummy
			AddLoot=VH_Remastered_Fix_loot,terep_szerpentin,rukh_pole_position,dummy
			AddLoot=VH_Remastered_Fix_loot,terep_szerpentin,rukh_pole_position,dummy
			AddLoot=VH_Remastered_Fix_loot,terep_szerpentin,rukh_pole_position,dummy
			AddLoot=VH_Remastered_Fix_loot,terep_szerpentin,rukh_pole_position,dummy
		}
	}
}
Ch4_Cold_caverns_POI
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_cold_caverns
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSoldierGroupKilled:First_place,terep_cold_caverns
		{
			EnableTrigger=terep_cold_caverns,BNT_SQ14_pile_of_bones,true
		}
		OnStoryData:Rare_ore_loot_active,keep
		{
			AddLoot=Beard_Essence,terep_cold_caverns,Rare_ore_loot,dummy
			AddLoot=Beard_Essence,terep_cold_caverns,Rare_ore_loot,dummy
		}
		OnItemGot:Rare_ore_fragments
		{
			AddStoryData=Rare_ore_in_inventory
		}
		OnSoldierGroupKilled:Domovoi_POI_group,terep_cold_caverns
		{
			AddStoryData=Poke_mine_cart
		}
		OnStoryData:cold_cavers_domovoy_done,keep
		{
			AddLoot=Weapon_smuggler_loot,terep_cold_caverns,Fallen_Domovoy_pos,dummy
			AddLoot=man_eating_loot2,terep_cold_caverns,Fallen_Domovoy_pos,dummy
			AddLoot=Harpy_ekszer,terep_cold_caverns,Fallen_Domovoy_pos,dummy
			AddLoot=Hiddentreasure_loot,terep_cold_caverns,Fallen_Domovoy_pos,dummy
		}		
	}
}
Ch1_The_moonstone
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_giantwoods
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		Mark=completed,terep_giantwoods,Npc_dead_man,npc,main
		OnSet
		{
			AddStoryData=Moonstone_dialog_available
		}
		OnStoryData:Moonstone_loot,keep
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Inactive
		OnSet
		{
			AddLoot=Moonstone_loot,terep_giantwoods,Npc_dead_man,npc
		}
		OnItemGot:Moonstone1
		{
			SetStage=15
		}
	}
	Stage15
	{
		State=Inactive
		OnSet
		{
			AddStoryData=First_moonstone_done
			SpawnMonster=Ice_Daemon_elite,ice_daemon_dead,terep_giantwoods,ice_daemon_position	
		}
		OnSoldierKilledname:ice_daemon_dead,terep_giantwoods
		{
			AddStoryData=Stupid_Helsing
			SetStage=20
		}
	}
	Stage20
	{
		State=Hidden
	}
}

Ch4_spiritwalkercamp2_techquest
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_giantwoods
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSoldierKilledName:Spiritwalker_boss2,terep_giantwoods
		{
			AddStoryData=Spiritwalker_boss2_dead
			SetVariable=Spiritwcamp2_endfight,1,add
			SetVariable=bosshalal_OK,1,add
		}
		OnSoldierKilledName:Spiritwalker_vet2,terep_giantwoods
		{
			CountSoldiers=terep_giantwoods,Spiritwalker_vet2,Spiritwalker_vet2_remaining,name
		}
		OnVariableChanged:Spiritwalker_vet2_remaining,0
		{
			SetVariable=Spiritwcamp2_endfight,1,add
			SetVariable=Veteran_halal_OK,1,add
		}
		OnSoldierKilledName:Spiritwalkers_camp2_soldier,terep_giantwoods
		{
			CountSoldiers=terep_giantwoods,Spiritwalkers_camp2_soldier,Swc2soldier_remaining,name
			SetVariable=samansoldier_checker,1,add
		}
		OnVariableChanged:Swc2soldier_remaining
		{
			Variable:Swc2soldier_remaining,smaller_equal,5
			{
				SetVariable=Spiritwcamp2_endfight,1,add
				SetVariable=Soldier_halal_OK,1,add
			}
		}
		OnVariableChanged:Spiritwcamp2_endfight,3
		{
			AddStoryData=Spiritwcamp2_fight_end
			HasStoryData:Relic_is_finded,equal,1
			{
				HasStoryData:The_curse_quest_begin,equal,0
				{
					RemoveArtifact=Spiritwalker_bone_relic
				}
			}
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch1_The_spiritwalker_camp2
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_giantwoods
		{
			SetStage=3
		}
	}
	Stage3
	{
		State=Inactive
		OnStoryData:The_curse_quest_begin,keep
		{
			SetStage=5
		}
		OnStoryData:Spiritwalkers2_activater,keep
		{
			SetPlayerActive=terep_giantwoods,Spiritwalkers2,true
			HasStoryData:Relic_is_finded,equal,0
			{
				AddStoryData=Add_spiritwalker_trophy
			}
			SetStage=4
		}
	}
	Stage4
	{
		State=Inactive
		OnStoryData:Spiritwcamp2_fight_end,keep
		{
			SetStage=15
		}
	}
	Stage5
	{
		State=Inactive
		Mark=Completed,terep_giantwoods,Spiritwalker_boss2,soldier,main
		OnSet
		{
			EnableTrigger=terep_giantwoods,Spiritwalkers2_activater,false
			SetPlayerFaction=terep_giantwoods,Spiritwalkers2,-1
		}
		OnStoryData:Fight_with_the_spiritwalkers2,keep
		{
			SetStage=10
		}
		OnStoryData:The_curse_quest_done,keep
		{
			SetStage=15
		}
		OnStoryData:The_storm_of_Perun,keep
		{
			SetStage=15
		}
	}
	Stage10
	{
		State=Inactive
		OnSet
		{
			SetPlayerFaction=terep_giantwoods,Spiritwalkers2,1
			SetPlayerActive=terep_giantwoods,Spiritwalkers2,true
			HasStoryData:Relic_is_finded,equal,0
			{
				AddStoryData=Add_spiritwalker_trophy
			}
		}
		OnStoryData:Spiritwcamp2_fight_end,keep
		{
			AddStoryData=animate_totem_active
			SetStage=15
		}
	}
	Stage15
	{
		OnSet
		{
			HasStoryData:Spiritwcamp2_fight_end,equal,1
			{
				AddStoryData=animate_totem_active
			}
		}
		State=Hidden
	}
}
Ch1_The_man_eating_giant
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_giantwoods
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			AddStoryData=Add_spiritwalker_relic
		}
		OnStoryData:Add_spiritwalker_trophy,keep
		{
			RemoveStoryData=Add_spiritwalker_relic
		}
		OnSoldierGroupKilled:man_eating_giant,terep_giantwoods
		{
			AddStoryData=Man_eating_giant_killed
		}
		OnItemGot:Spiritwalker_bone_relic
		{
			AddStoryData=Relic_is_finded
			SetStage=10
		}
		OnItemGot:Bone_Relic_of_spiritwalker
		{
			AddStoryData=SW_Trophy_is_finded
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch1_The_man_eating_loot
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_giantwoods
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:Man_eating_loot_done,keep
		{
			HasStoryData:Add_spiritwalker_relic,equal,1
			{
				AddLoot=SPW_Bone_Relic_loot,terep_giantwoods,Maneating_loot_pos,dummy
				SetStage=10
			}
			HasStoryData:Add_spiritwalker_trophy,equal,1
			{
				AddLoot=Spiritwalker_trophy,terep_giantwoods,Maneating_loot_pos,dummy
				SetStage=10
			}
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch1_Giant_shopkeeper
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_giantwoods
		{
			AddStoryData=Giant_Big_Iron_key
			AddStoryData=Giant_Jade_Rothar_figure
			AddStoryData=Giant_Fifth_element
			AddStoryData=Giant_Rusty_Bomb
			AddStoryData=Giant_Weapon_oil
			AddStoryData=Giant_Ring_of_message
			AddStoryData=Giant_Machine_part
			AddStoryData=Giant_Swamp_lily
			AddStoryData=Giant_Happiness_mushrooms
			AddStoryData=Giant_chicken_egg
			AddStoryData=Giant_Electric_coil
			AddStoryData=Giant_Orichalcum_ore
			AddStoryData=Giant_Borgovian_guide	
		}
		OnStoryData:Giant_first_meet_done,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=inactive
		OnItemGot:Big_Iron_key
		{
			RemoveStoryData=Giant_Big_Iron_key
			AddStoryData=Kobold_key02_taken
			SetVariable=buyingitem,1,add
		}
		OnItemGot:Jade_Rothar_figure
		{
			RemoveStoryData=Giant_Jade_Rothar_figure
			AddStoryData=Jade_figure_taken
			SetVariable=buyingitem,1,add
		}
		OnItemGot:Giant_Fifth_element
		{
			RemoveStoryData=Giant_Fifth_element
			SetVariable=buyingitem,1,add
		}
		OnItemGot:Giant_Rusty_Bomb
		{
			RemoveStoryData=Giant_Rusty_Bomb
			SetVariable=buyingitem,1,add
		}
		OnItemGot:Giant_Weapon_oil
		{
			RemoveStoryData=Giant_Weapon_oil
			SetVariable=buyingitem,1,add
		}
		OnItemGot:Ring_of_message
		{
			RemoveStoryData=Giant_Ring_of_message
			AddStoryData=Ring_of_message_taken
			SetVariable=buyingitem,1,add
		}
		OnItemGot:Giant_Machine_part
		{
			RemoveStoryData=Giant_Machine_part
			SetVariable=buyingitem,1,add
		}
		OnItemGot:Giant_Swamp_lily
		{
			RemoveStoryData=Giant_Swamp_lily
			AddStoryData=Swamp_lily_taken
			SetVariable=buyingitem,1,add
		}
		OnItemGot:Happiness_mushrooms
		{
			RemoveStoryData=Giant_Happiness_mushrooms
			SetVariable=buyingitem,1,add
		}
		OnItemGot:chicken_egg
		{
			RemoveStoryData=Giant_chicken_egg
			SetVariable=buyingitem,1,add
		}
		OnItemGot:Giant_Electric_coil
		{
			RemoveStoryData=Giant_Electric_coil
			SetVariable=buyingitem,1,add
		}
		OnItemGot:Giant_Orichalcum_ore
		{
			RemoveStoryData=Giant_Orichalcum_ore
			SetVariable=buyingitem,1,add
		}
		OnItemGot:Borgovian_guide
		{
			RemoveStoryData=Giant_Borgovian_guide
			SetVariable=buyingitem,1,add
		}
		OnVariableChanged:buyingitem,13
		{
			AddStoryData=Giant_Shop_closed
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch4_Supply_mission_activater
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:TD4_start,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnMapChanged:terep_Lair
		{
			AddStoryData=Supply_shipment
			SendRadioReport=Commander_Petrov,Supply_shipment
			SetStage=10
		}
	}
	Stage10
	{
		State=Inactive
		OnStoryData:RM_Supply_completed,keep
		{
			AddResistanceEquipmentLevel=1
			SetStage=15
		}
		OnStoryData:RM_Supply_failed,keep
		{
			SetStage=15
		}
	}
	Stage15
	{
		State=Hidden
	}
}

Ch1_Broken_curse
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:First_Seal_breaking_up,keep
		{
			#Ezek soldierek és sokan vannak!!!
			#MoveNPC=terep_giantwoods,Giantwood_ghost_soldier
			#MoveNPC=terep_giantwoods,Giantwood_ghost_soldier_vet
			EnableTrigger=terep_giantwoods,BNT_SQ15_Abandoned_city,true
			EnableTrigger=terep_giantwoods,Thief_ghost_spawn,false
			SetStage=5
		}
		OnStoryData:The_curse_quest_done,keep
		{
			#MoveNPC=terep_giantwoods,Giantwood_ghost_soldier
			#MoveNPC=terep_giantwoods,Giantwood_ghost_soldier_vet
			EnableTrigger=terep_giantwoods,BNT_SQ15_Abandoned_city,true
			EnableTrigger=terep_giantwoods,Thief_ghost_spawn,false
			SetStage=5
		}
	}
	Stage5
	{
		State=Hidden
	}
}
Ch4_Ice_daemons
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnItemGot:Moonstone2
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			AddStoryData=Second_moonstone_done
			SpawnMonster=Ice_Daemon_minion,ice_daemon_spawn,terep_giantwoods,ice_daemon_position1
			SpawnMonster=Ice_Daemon_minion,ice_daemon_spawn,terep_giantwoods,ice_daemon_position2
			SpawnMonster=Ice_Daemon_minion,ice_daemon_spawn,terep_giantwoods,ice_daemon_position3
			SpawnMonster=Ice_Daemon_minion,ice_daemon_spawn,terep_giantwoods,ice_daemon_position4
			SpawnMonster=Ice_Daemon_minion,ice_daemon_spawn,terep_giantwoods,ice_daemon_position5
		}
		OnSoldierKilledname:ice_daemon_spawn,terep_giantwoods
		{
			CountSoldiers=terep_giantwoods,ice_daemon_spawn,daemon_remaining,name
		}
		OnVariableChanged:daemon_remaining,0
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch4_The_trap
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:bridge_trap_activated,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			SpawnMonster=Ice_Tiger,Giantwood_Ice_Tiger_trap,terep_giantwoods,trap_monster_1
			SpawnMonster=Ice_Tiger,Giantwood_Ice_Tiger_trap,terep_giantwoods,trap_monster_1
			SpawnMonster=Ice_Tiger,Giantwood_Ice_Tiger_trap,terep_giantwoods,trap_monster_1
			SpawnMonster=Ice_Tiger,Giantwood_Ice_Tiger_trap,terep_giantwoods,trap_monster_1
			SpawnMonster=Ice_Tiger,Giantwood_Ice_Tiger_trap,terep_giantwoods,trap_monster_1
			SpawnMonster=Ice_Tiger,Giantwood_Ice_Tiger_trap,terep_giantwoods,trap_monster_2
			SpawnMonster=Ice_Tiger,Giantwood_Ice_Tiger_trap,terep_giantwoods,trap_monster_2
			SpawnMonster=Ice_Tiger,Giantwood_Ice_Tiger_trap,terep_giantwoods,trap_monster_2
			SpawnMonster=Ice_Tiger,Giantwood_Ice_Tiger_trap,terep_giantwoods,trap_monster_2
			SpawnMonster=Ice_Tiger,Giantwood_Ice_Tiger_trap,terep_giantwoods,trap_monster_2
		}
		OnSoldierKilledName:Giantwood_Ice_Tiger_trap,terep_giantwoods
		{
			CountSoldiers=terep_giantwoods,Giantwood_Ice_Tiger_trap,Ice_Tiger_trap_remaining
		}
		OnVariableChanged:Ice_Tiger_trap_remaining,0
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch4_The_stoneheads_loot
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_giantwoods
		{
			SetStage=3
		}
	}
	Stage3
	{
		State=Inactive
		OnSoldierGroupKilled:idol_spiritwalkers,terep_giantwoods
		{
			EnableTrigger=terep_giantwoods,BNT_POI06_giantheads,true
		}
		OnStoryData:BNT_POI06_giantheads,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:spirit_banter_played,keep
		{
			#loottype ellenõrzése!!!
			AddLoot=Stoneheads_loot,terep_giantwoods,Npc_stonehead2,npc
			EnableWaypoint=terep_giantwoods;giantwood_waypoint,true
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch4_Dark_spirit
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:wake_up_dark_spirit,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			SpawnMonster=dark_spirit_minion,dark_spirit_minion,terep_giantwoods,dark_spirit_spawn_location
			SpawnMonster=dark_spirit_minion,dark_spirit_minion,terep_giantwoods,dark_spirit_spawn_location
			SpawnMonster=dark_spirit_minion,dark_spirit_minion,terep_giantwoods,dark_spirit_spawn_location
			SpawnMonster=dark_spirit_minion,dark_spirit_minion,terep_giantwoods,dark_spirit_spawn_location
			SpawnMonster=dark_spirit_minion,dark_spirit_minion,terep_giantwoods,dark_spirit_spawn_location
			SpawnMonster=dark_spirit_minion,dark_spirit_minion,terep_giantwoods,dark_spirit_spawn_location
			SpawnMonster=dark_spirit_minion,dark_spirit_minion,terep_giantwoods,dark_spirit_spawn_location
			SpawnMonster=dark_spirit_minion,dark_spirit_minion,terep_giantwoods,dark_spirit_spawn_location
			SpawnMonster=dark_spirit_minion,dark_spirit_minion,terep_giantwoods,dark_spirit_spawn_location
			SpawnMonster=dark_spirit_minion,dark_spirit_minion,terep_giantwoods,dark_spirit_spawn_location
			SpawnMonster=dark_spirit,dark_spirit,terep_giantwoods,dark_spirit_spawn_location
		}
		OnSoldierKilledname:dark_spirit,terep_giantwoods
		{
			AddStoryData=Dark_spirit_eliminated
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch4_The_spiritwalkers
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnSoldierKilledname:Spiritwalker_boss1,terep_giantwoods
		{
			SetVariable=Dead_Spiritwalker_boss,1,add
		}
		OnSoldierKilledname:Spiritwalker_boss2,terep_giantwoods
		{
			SetVariable=Dead_Spiritwalker_boss,1,add
		}
		OnSoldierKilledname:Spiritwalker_boss3,terep_giantwoods
		{
			SetVariable=Dead_Spiritwalker_boss,1,add
		}
		OnVariableChanged:Dead_Spiritwalker_boss,2
		{
			AddStoryData=Third_Seal_breaking_up
			SetStage=5
		}
	}
	Stage5
	{
		State=Hidden
	}
}
Ch4_The_magical_Seals
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:First_Seal_breaking_up,keep
		{
			SetVariable=sealbreakingup,1,add
		}
		OnStoryData:Second_Seal_breaking_up,keep
		{
			SetVariable=sealbreakingup,1,add
		}
		OnStoryData:Third_Seal_breaking_up,keep
		{
			SetVariable=sealbreakingup,1,add
		}
		OnStoryData:Fourth_Seal_breaking_up,keep
		{
			SetVariable=sealbreakingup,1,add
		}
		OnVariableChanged:sealbreakingup,2
		{
			AddStoryData=Aura_breaking_up
			SetStage=5
		}
	}
	Stage5
	{
		State=Hidden
	}
}
Ch4_Agressive_mage
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Do_not_go_on,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			SetPlayerFaction=terep_giantwoods,IceMage,1
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}

Ch4_Scarecrow
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_szerpentin
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:Scarecrow_banter_done,keep
		{
			AddLoot=Scarecrow_hiddencont_loot,terep_szerpentin,VH2harpyfeather_trophy_loot,dummy
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch4_Cold_cavern_skeleton_loot
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_cold_caverns
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:skeleton_loot,keep
		{
			
			AddLoot=Vh2cavern_ring_loot,terep_cold_caverns,skeleton_loot,dummy
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch4_Szerpentin_Don_Quijote_Spear_loot
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_szerpentin
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:Don_Quijote_Spear,keep
		{
			AddLoot=Don_Quijote_Spear_loot,terep_szerpentin,Don_Quijote_Spear,dummy
			SetObjectVisible=terep_szerpentin,donquijote_spear,false
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch2_Tear_of_Koscsej
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:The_storm_of_Perun,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			HasStoryData:First_moonstone_done,equal,1
			{
				HasStoryData:Second_moonstone_done,equal,1
				{
					HasStoryData:Stargate_quest_begin,equal,1
					{
						SetStage=10
					}
				}
			}
		}
		OnStoryData:First_moonstone_done,keep
		{
			HasStoryData:Second_moonstone_done,equal,1
			{
				HasStoryData:Stargate_quest_begin,equal,1
				{
					SetStage=10
				}
			}
		}
		OnStoryData:Second_moonstone_done,keep
		{
			HasStoryData:First_moonstone_done,equal,1
			{
				HasStoryData:Stargate_quest_begin,equal,1
				{
					SetStage=10
				}
			}
		}
		OnStoryData:Stargate_quest_begin,keep
		{
			HasStoryData:First_moonstone_done,equal,1
			{
				HasStoryData:Second_moonstone_done,equal,1
				{
					SetStage=10
				}
			}
		}
		#OnStoryData:Second_chapter_end,keep
		#{
		#	SetStage=15
		#}
	}
	Stage10
	{
		State=Inactive
		Mark=Completed,terep_Lair,NPC_Lair_Alchemist,npc,main
		OnSet
		{
			AddStoryData=Koscsej_tear_dialog_available
		}
		OnStoryData:Second_chapter_end,keep
		{
			SetStage=15
		}
		OnStoryData:The_tear_in_inventory,keep
		{
			SetStage=15
		}
	}
	Stage15
	{
		State=Hidden
	}
}
Ch2_Chimera_informations
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Legend_of_chimera_quest_begin,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			Mark=Completed,terep_ink_glass,First_bookself,dummy,main
			Mark=Completed,terep_ink_glass,Second_bookself,dummy,main
			Mark=Completed,terep_ink_glass,Third_bookself,dummy,main
		}
		OnStoryData:Chimera_info01_done,keep
		{
			Mark=none,terep_ink_glass,First_bookself,dummy,main
		}
		OnStoryData:Chimera_info02_done,keep
		{
			Mark=none,terep_ink_glass,Second_bookself,dummy,main
		}
		OnStoryData:Chimera_info03_done,keep
		{
			Mark=none,terep_ink_glass,Third_bookself,dummy,main
		}
		OnMapChanged:terep_Lair
		{
			HasStoryData:ink_monster_beaten,equal,1
			{
				Mark=none,terep_ink_glass,First_bookself,dummy,main
				Mark=none,terep_ink_glass,Second_bookself,dummy,main
				Mark=none,terep_ink_glass,Third_bookself,dummy,main
				SetStage=10
			}
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch5_The_storage
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnItemGot:glass_key
		{
			AddStoryData=glass_key_equipped
		}
		OnStoryData:glass_key_equipped,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:spilled_essence,keep
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Inactive
		OnSet
		{
			AddLoot=spilled_essence,terep_ink_glass,Old_crate_position,dummy
			AddLoot=spilled_essence,terep_ink_glass,Old_crate_position,dummy
			AddLoot=spilled_essence,terep_ink_glass,Old_crate_position,dummy
			AddLoot=spilled_essence,terep_ink_glass,Old_crate_position,dummy
			AddLoot=spilled_essence,terep_ink_glass,Old_crate_position,dummy
			AddLoot=spilled_essence,terep_ink_glass,Old_crate_position,dummy
			AddLoot=spilled_essence,terep_ink_glass,Old_crate_position,dummy
			AddLoot=spilled_essence,terep_ink_glass,Old_crate_position,dummy
			AddLoot=spilled_essence,terep_ink_glass,Old_crate_position,dummy
			AddLoot=spilled_essence,terep_ink_glass,Old_crate_position,dummy
			SpawnMonster=Chimera_green_vet,Chimera_green_vet,terep_ink_glass,chimera_spawn_pos01
			SpawnMonster=Chimera_green_champ,Chimera_green_champ,terep_ink_glass,chimera_spawn_pos02
			SpawnMonster=Chimera_green_vet,Chimera_green_vet,terep_ink_glass,chimera_spawn_pos03
			SetStage=15
		}
	}
	Stage15
	{
		State=Hidden
		OnSet
		{
			RemoveArtifact=glass_key
		}
	}
}
Ch5_Emerald_lantern
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnSoldierGroupKilled:Emerald_lantern_guards,terep_ink_glass
		{
			AddStoryData=Take_the_lantern
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:Lantern_loot_available,keep
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Inactive
		OnSet
		{
			SetObjectVisible=terep_ink_glass,Emerald_lantern_remove,false
			AddLoot=Emerald_lantern_loot,terep_ink_glass,Lantern_loot_pos,dummy
		}
		OnItemGot:Emerald_lantern
		{
			AddStoryData=Resistance_Relic06
			SetStage=15
		}
	}
	Stage15
	{
		State=Hidden
	}
}
Ch5_Technikai_quest02
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Legend_of_chimera_quest_done,keep
		{
			AddStoryData=CO_quest_available
			EnableWaypoint=terep_szerpentin;szerpentin_waypoint,true
			EnableWaypoint=terep_szerpentin;szerpentin_village_waypoint,true
			EnableWaypoint=terep_giantwoods;giantwood_waypoint,true
			EnableWaypoint=terep_giantwoods;spiritwalker_waypont,true
			EnableWaypoint=terep_giantwoods;ghostvillage_waypoint,true
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch5_Resistance_soldier_szamlalo
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Second_siege_phase,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSoldierKilledName:B2_resistance_attacker,terep_barrikados2
		{
			CountSoldiers=terep_barrikados2,B2_resistance_attacker,B2_soldier_remaining,name
		}
		OnVariableChanged:B2_soldier_remaining,6
		{
			AddStoryData=Lots_of_soldiers_lost
		}
		OnVariableChanged:B2_soldier_remaining,0
		{
			AddStoryData=all_B2_soldiers_lost
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch5_Barrikados2_artillery_attack
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_barrikados2
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSoldierGroupKilled:artillery_defenders01,terep_barrikados2
		{
			EnableTrigger=terep_barrikados2,Artillery_nearby,true
		}
		OnSoldierGroupKilled:artillery_defenders02,terep_barrikados2
		{
			EnableTrigger=terep_barrikados2,Artillery2_pos_trigger,true
		}
		OnSoldierGroupKilled:artillery_defenders03,terep_barrikados2
		{
			EnableTrigger=terep_barrikados2,Artillery3_pos_trigger,true
		}
		OnStoryData:Artillery_nearby,keep
		{
			SetVariable=Eliminated_artillery_group,1,add
		}
		OnStoryData:Artillery2_pos_trigger,keep
		{
			SetVariable=Eliminated_artillery_group,1,add
		}
		OnStoryData:Artillery3_pos_trigger,keep
		{
			SetVariable=Eliminated_artillery_group,1,add
		}
		OnVariableChanged:Eliminated_artillery_group,1
		{
			AddStoryData=Artillery_occupy01
		}
		OnVariableChanged:Eliminated_artillery_group,2
		{
			AddStoryData=Artillery_occupy02
		}
		OnVariableChanged:Eliminated_artillery_group,3
		{
			AddStoryData=Artillery_occupy03
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch2_Questfeltetel_segedlet
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_barrikados2
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSoldierGroupKilled:artillery_defenders01,terep_barrikados2
		{
			AddStoryData=No_artillery_quest
		}
		OnSoldierGroupKilled:railwaygun_defenders,terep_barrikados2
		{
			AddStoryData=No_railwaygun_quest
		}
	}
}
Ch2_Four_choise
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Orni_base_occupied,keep
		{
			SetStage=5
		}
		OnStoryData:Res_captain_activator,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		Mark=Completed,terep_barrikados2,barrikados2_resistance_captain,soldier,main
		OnSet
		{
			SetGangActive=terep_barrikados2,resistance_group1,true
		}
		OnStoryData:Four_command_done,keep
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch5_Shredder_terminator
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Terminator_attack_mode,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			SetPlayerFaction=terep_barrikados2,Terminator,1
		}
		OnSoldierKilled:Barrikados2_Shredder_terminator,terep_barrikados2
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch2_Barrikados_thieves
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:BNT_POI10_thief_conversation,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:thief_loot_dropped,keep
		{
			AddLoot=VH_Remastered_Fix_loot,terep_barrikados2,thief_treasure_loot,dummy
			AddLoot=VH_Remastered_Fix_loot,terep_barrikados2,thief_treasure_loot,dummy
			AddLoot=VH_Remastered_Fix_loot,terep_barrikados2,thief_treasure_loot,dummy
			AddLoot=VH_Remastered_Fix_loot,terep_barrikados2,thief_treasure_loot,dummy
			AddLoot=VH_Remastered_Fix_loot,terep_barrikados2,thief_treasure_loot,dummy
			AddLoot=VH_Remastered_Fix_loot,terep_barrikados2,thief_treasure_loot,dummy
			AddLoot=VH_Remastered_Fix_loot,terep_barrikados2,thief_treasure_loot,dummy
			AddLoot=VH_Remastered_Fix_loot,terep_barrikados2,thief_treasure_loot,dummy
			AddLoot=VH_Remastered_rare_fix,terep_barrikados2,thief_treasure_loot,dummy
			AddLoot=VH_Remastered_rare_fix,terep_barrikados2,thief_treasure_loot,dummy
			AddLoot=VH_Remastered_epic_small_chance,terep_barrikados2,thief_treasure_loot,dummy
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch2_Mystic_machine_plan
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:occupied_area06,keep
		{
			HasStoryData:foundry_defenders08_eliminated,equal,1
			{
				SetStage=5
			}
		}
		OnStoryData:foundry_defenders08_eliminated,keep
		{
			HasStoryData:occupied_area06,equal,1
			{
				SetStage=5
			}
		}
	}
	Stage5
	{
		State=Inactive
		Mark=Completed,terep_foundry,Mystic_machine_plan,object,main
		OnSet
		{
			HasStoryData:Mysterious_plan_cut_done,equal,1
			{
				SetStage=10
			}
		}
		OnStoryData:Mysterious_plan_cut_done,keep
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch5_Secret_Foundrylab
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:BNT_POI11_Secretlab,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			EnableEntrance=terep_foundry,Entrance_to_Foundrylab3,true
		}
		OnMapChanged:terep_kohok_room3
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Inactive
		OnStoryData:A2D2_message_completed,keep
		{
			AddLoot=Lightsabre_crystal_loot,terep_kohok_room3,Arthur_loot_position,dummy
			SetStage=15
		}
	}
	Stage15
	{
		State=Hidden
	}
}
Ch5_Predator_mission_activater
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_foundry
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnMapChanged:terep_Lair
		{
			AddStoryData=Hunt_for_beast_begin
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch5_Goldfish_POI_end
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_foundry
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:One_wish_dialog_done,keep
		{
			AddLoot=diamond_ring_loot,terep_foundry,Goldfish_loot_position,dummy
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch5_Hilf_life_POI
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_foundry
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:HalfLife_POI_completed,keep
		{
			# Category=Gravimetric_Gun létezik? Ez kell hozzá!
			AddLoot=Half_life_loot,terep_foundry,Half_life_position,dummy
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}

Ch6_City1_POI
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Steal_the_gloves,keep
		{
			SetObjectVisible=terep_city_1_csatorna,Dungeonkeeper_gloves,false
		}
	}
}

Ch6_gargoyle_activator
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:gargoyle,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			SetGangActive=terep_city_1,gargoyle,true
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch6_gargoyle_activator2
{
	
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:gargoyle2,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			SetGangActive=terep_city_1,gargoyle2,true
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch6_sticklizard_activator
{
	
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:stick1,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			SetGangActive=terep_city_1,stick1,true
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch6_sticklizard_activator2
{
	
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:stick2,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			SetGangActive=terep_city_1,stick2,true
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch6_Koscsej_radio_messages
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_poksziklak
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:Koscsej_message01,keep
		{
			SetVariable=Koscsej_message,1,add
		}
		OnStoryData:Koscsej_message02,keep
		{
			SetVariable=Koscsej_message,1,add
		}
		OnStoryData:Koscsej_message03,keep
		{
			SetVariable=Koscsej_message,1,add
		}
		OnStoryData:Koscsej_message04,keep
		{
			SetVariable=Koscsej_message,1,add
		}
		OnStoryData:Koscsej_message05,keep
		{
			SetVariable=Koscsej_message,1,add
		}
		OnStoryData:Koscsej_message06,keep
		{
			SetVariable=Koscsej_message,1,add
		}
		OnStoryData:Koscsej_message07,keep
		{
			SetVariable=Koscsej_message,1,add
		}
		OnStoryData:Koscsej_message08,keep
		{
			SetVariable=Koscsej_message,1,add
		}
		OnStoryData:Koscsej_message09,keep
		{
			SetVariable=Koscsej_message,1,add
		}
		OnVariableChanged:Koscsej_message,1
		{
			SendRadioReport=Koscsej,Prisoner_Seven_Message01
		}
		OnVariableChanged:Koscsej_message,2
		{
			SendRadioReport=Koscsej,Prisoner_Seven_Message02
		}
		OnVariableChanged:Koscsej_message,3
		{
			SendRadioReport=Koscsej,Prisoner_Seven_Message03
		}
		OnVariableChanged:Koscsej_message,4
		{
			SendRadioReport=Koscsej,Prisoner_Seven_Message04
		}
		OnVariableChanged:Koscsej_message,5
		{
			SendRadioReport=Koscsej,Prisoner_Seven_Message05
		}
		OnVariableChanged:Koscsej_message,6
		{
			SendRadioReport=Koscsej,Prisoner_Seven_Message06
		}
		OnVariableChanged:Koscsej_message,7
		{
			SendRadioReport=Koscsej,Prisoner_Seven_Message07
		}
		OnVariableChanged:Koscsej_message,8
		{
			SendRadioReport=Koscsej,Prisoner_Seven_Message08
		}
		OnVariableChanged:Koscsej_message,9
		{
			SendRadioReport=Koscsej,Prisoner_Seven_Message09
			RemoveStoryData=Koscsej_message01
			RemoveStoryData=Koscsej_message02
			RemoveStoryData=Koscsej_message03
			RemoveStoryData=Koscsej_message04
			RemoveStoryData=Koscsej_message05
			RemoveStoryData=Koscsej_message06
			RemoveStoryData=Koscsej_message07
			RemoveStoryData=Koscsej_message08
			RemoveStoryData=Koscsej_message09
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch6_Altar_little_bossfight
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Steal_the_skull,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			SetObjectVisible=terep_poksziklak,pokszikla_koponya_oltar,false
			HasStoryData:Steal_the_armor,equal,1
			{
				HasStoryData:Steal_the_medallion,equal,1
				{
					HasStoryData:Steal_the_gloves,equal,1
					{
						AddStoryData=angry_altair_daemon
					}
				}
			}
		}
		OnStoryData:Altair_cutscene_done,keep
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Inactive
		OnSet
		{
			ChangeMap=terep_ink_daemon,Entrance_from_fields
		}
		OnSoldierGroupKilled:ink_daemon,terep_ink_daemon
		{
			AddStoryData=ink_daemon_loot_activated
			SetStage=15
		}
	}
	Stage15
	{
		State=Inactive
		OnSet
		{
			# megnézni milyen kapu van a pályán
			EnableEntrance=terep_ink_daemon,Entrance_to_poksziklak,true
		}
		OnStoryData:Klicked_daemon_crystal,keep
		{
			AddLoot=Ink_daemon_loot,terep_ink_daemon,Daemon_loot_pos,dummy
			AddLoot=VH_Remastered_rare_fix,terep_ink_daemon,Daemon_loot_pos,dummy
			AddLoot=VH_Remastered_rare_fix,terep_ink_daemon,Daemon_loot_pos,dummy
			AddLoot=VH_Remastered_rare_fix,terep_ink_daemon,Daemon_loot_pos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_ink_daemon,Daemon_loot_pos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_ink_daemon,Daemon_loot_pos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_ink_daemon,Daemon_loot_pos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_ink_daemon,Daemon_loot_pos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_ink_daemon,Daemon_loot_pos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_ink_daemon,Daemon_loot_pos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_ink_daemon,Daemon_loot_pos,dummy
		}
		OnMapChanged:terep_poksziklak
		{
			SetStage=20
		}
	}
	Stage20
	{
		State=Hidden
	}
}
Ch6_Engraved_key
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_poksziklak
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:secret_key_door_opened,keep
		{
			EnableEntrance=terep_poksziklak,Inkportal_kulcs_oda,true
			EnableEntrance=terep_poksziklak,Inkportal_kulcs_vissza,true
			SetStage=10
		}
	}
	Stage10
	{
		State=Inactive
		OnStoryData:Mystic_orb_loot_available,keep
		{
			AddLoot=Ink_daemon_loot,terep_poksziklak,Mystic_orb_loot_pos,dummy
			AddLoot=VH_Remastered_rare_fix,terep_poksziklak,Mystic_orb_loot_pos,dummy
			AddLoot=VH_Remastered_rare_fix,terep_poksziklak,Mystic_orb_loot_pos,dummy
			AddLoot=VH_Remastered_rare_fix,terep_poksziklak,Mystic_orb_loot_pos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_poksziklak,Mystic_orb_loot_pos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_poksziklak,Mystic_orb_loot_pos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_poksziklak,Mystic_orb_loot_pos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_poksziklak,Mystic_orb_loot_pos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_poksziklak,Mystic_orb_loot_pos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_poksziklak,Mystic_orb_loot_pos,dummy
			AddLoot=VH_Remastered_gold_fix,terep_poksziklak,Mystic_orb_loot_pos,dummy
			SetStage=15
		}
	}
	Stage15
	{
		State=Hidden
	}
}
Ch6_SpiderRocks_cemetery
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_poksziklak
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:grave01_klicked,keep
		{
			SetVariable=klicked_grave,1,add
		}
		OnStoryData:grave02_klicked,keep
		{
			SetVariable=klicked_grave,1,add
		}
		OnStoryData:grave03_klicked,keep
		{
			SetVariable=klicked_grave,1,add
		}
		OnStoryData:grave04_klicked,keep
		{
			SetVariable=klicked_grave,1,add
		}
		OnStoryData:grave05_klicked,keep
		{
			SetVariable=klicked_grave,1,add
		}
		OnStoryData:grave06_klicked,keep
		{
			SetVariable=klicked_grave,1,add
		}
		OnStoryData:grave07_klicked,keep
		{
			SetVariable=klicked_grave,1,add
		}
		OnStoryData:grave08_klicked,keep
		{
			SetVariable=klicked_grave,1,add
		}
		OnStoryData:grave09_klicked,keep
		{
			SetVariable=klicked_grave,1,add
		}
		OnStoryData:grave10_klicked,keep
		{
			SetVariable=klicked_grave,1,add
		}
		OnVariableChanged:klicked_grave,4
		{
			AddStoryData=This_is_five_grave
		}
		OnVariableChanged:klicked_grave,5
		{
			AddStoryData=over_five_grave
		}
		OnVariableChanged:klicked_grave,10
		{
			AddStoryData=Allgrave_clicked
			HasStoryData:cemetery_loot_done,equal,1
			{
				SetStage=10
			}
		}
		OnStoryData:cemetery_loot_done,keep
		{
			AddLoot=VH_Remastered_rare_fix,terep_poksziklak,cemetery_position4,dummy
			AddLoot=VH_Remastered_Fix_loot,terep_poksziklak,cemetery_position4,dummy
			AddLoot=VH_Remastered_Fix_loot,terep_poksziklak,cemetery_position4,dummy
			AddLoot=VH_Remastered_Fix_loot,terep_poksziklak,cemetery_position4,dummy
			AddLoot=VH_Remastered_rare_fix,terep_poksziklak,cemetery_position4,dummy
			SpawnMonster=Wight_vet,Wight_vet,terep_poksziklak,cemetery_position1
			SpawnMonster=Wight,Wight,terep_poksziklak,cemetery_position1
			SpawnMonster=Wight_vet,Wight_vet,terep_poksziklak,cemetery_position2
			SpawnMonster=Wight,Wight,terep_poksziklak,cemetery_position2
			SpawnMonster=Wight_vet,Wight_vet,terep_poksziklak,cemetery_position3
			SpawnMonster=Wight,Wight,terep_poksziklak,cemetery_position3
			SpawnMonster=Wight_vet,Wight_vet,terep_poksziklak,cemetery_position4
			SpawnMonster=Wight,Wight,terep_poksziklak,cemetery_position4
			HasStoryData:Allgrave_clicked,equal,1
			{
				SetStage=10
			}
		}
	}
	Stage10
	{
		State=Hidden
	}
}


Glutton_Idol
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:falank_kaja
		{
			PlayEffect=terepek\kobalvany_mocsar\nagyerdo_kobalvany_aktivalas.N2E,terep_nagyerdo,interactable,StoneIdol
			PlayEffect=terepek\kobalvany_mocsar\nagyerdo_kobalvany_aktivalas.N2E,terep_ink_monsta,interactable,StoneIdol
		}
	}
}

Ch1_Inkheart_Behemoth
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:boss_katlan,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			EnableEntrance=terep_ink_quarry,Bossfight_segedkapu,true
			SpawnMonster=Behemoth_boss,Ink_quarry_bossfight,terep_ink_quarry,quarry_boss_position,Unnamed player 0,bossfight
			SpawnMonster=behemoth_min,Ink_quarry_bossfight,terep_ink_quarry,quarry_minions_position1,Unnamed player 0,bossfight
			SpawnMonster=behemoth_min,Ink_quarry_bossfight,terep_ink_quarry,quarry_minions_position2,Unnamed player 0,bossfight
			SpawnMonster=behemoth_min,Ink_quarry_bossfight,terep_ink_quarry,quarry_minions_position3,Unnamed player 0,bossfight
		}
		OnSoldierKilledName:Ink_quarry_bossfight,terep_ink_quarry
		{
			CountSoldiers=terep_ink_quarry,Ink_quarry_bossfight,bossfight_soldier_remaining,name
		}
		OnVariableChanged:bossfight_soldier_remaining,0
		{
			AddStoryData=Quarry_boss_defeated
		}
		OnStoryData:Quarry_boss_defeated,keep
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
		OnSet
		{
			EnableEntrance=terep_ink_quarry,Bossfight_segedkapu,false
		}
	}
}
 
Ch3_belvaros_hirdetotablak_hc
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:hirdetotabla1_done,keep
		{
			SetVariable=hirdetotabla_elolvasva,1,add
		}
		OnStoryData:hirdetotabla2_done,keep
		{
			SetVariable=hirdetotabla_elolvasva,1,add
		}
		OnStoryData:hirdetotabla3_done,keep
		{
			SetVariable=hirdetotabla_elolvasva,1,add
		}
		OnStoryData:hirdetotabla4_done,keep
		{
			SetVariable=hirdetotabla_elolvasva,1,add
		}
		OnStoryData:hirdetotabla5_done,keep
		{
			SetVariable=hirdetotabla_elolvasva,1,add
		}
		OnStoryData:hirdetotabla6_done,keep
		{
			SetVariable=hirdetotabla_elolvasva,1,add
		}
		OnVariableChanged:hirdetotabla_elolvasva,6
		{
			AddStoryData=oldtownadverts_hc_done
			RemoveStoryData=hirdetotabla1_done
			RemoveStoryData=hirdetotabla2_done
			RemoveStoryData=hirdetotabla3_done
			RemoveStoryData=hirdetotabla4_done
			RemoveStoryData=hirdetotabla5_done
			RemoveStoryData=hirdetotabla6_done
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}

Ch3_belvaros_hc_junkitem
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_Belvaros
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnItemGot:Junk_item
		{
			SetVariable=Junk_item_szamolas,1,add
		}
		OnVariableChanged:Junk_item_szamolas,3
		{
			AddStoryData=allthejunk_hc_done
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}

Ch3_belvaros_rottenfish_hc
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:rottenfish_hc_done,keep
		{
			AddLoot=rottenfish_hc,terep_Belvaros,rottenfish_hc_loot,dummy
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}

Ch3_belvaros_lion_statue_hiddenloot_hc
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:oldtownloot_hc_done,keep
		{
			AddLoot=oldtownloot_hc,terep_Belvaros,lion_statue_treasure,dummy
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}

Ch3_tetok2_killing_minions_hc
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnSoldierKilledName:Chimney_sweep_minion,terep_tetok2
		{
			SetVariable=minions_killed_hc,1,add
		}
		OnVariableChanged:minions_killed_hc,4
		{
			AddStoryData=kemenysepro_hc_done
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch1_Missiontech1
{
	Chapter=0
	
	Stage0
	{			
		State=Inactive
		OnStoryData:RM_Crazed_annihilators,keep
		{
			SendRadioReport=Commander_Petrov,MS_Crazedannihilators
			AddResistanceSoldierCap=4
		}				
		OnStoryData:TD7_start,keep
		{
			SendRadioReport=Vlados,MS_TD1_1
			SendRadioReport=Vlados,MS_TD1_2
			SendRadioReport=Vlados,MS_TD1_3
			AddResistanceSoldierCap=7
		}
		OnStoryData:RM_Ink_incursions,keep
		{
			SendRadioReport=Commander_Petrov,MS_Ink_incursions
		}						
			
		OnStoryData:Second_chapter_start,keep
		{
			AddResistanceSoldierCap=6
			SetStage=10
			EnableTrigger=terep_Haunted_Forest02,wraith_hellgate_position,false
			EnableTrigger=terep_Haunted_Forest02,wraith_relics_position,false
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch1_Lair_Recordkeeper_markers
{
	Chapter=8
	
	Stage0
	{			
		State=Inactive
		#1-info
		OnStoryData:COS_lead_captured,keep
		{
			Mark=new,terep_Lair,NPC_konyvtaros,npc,main
		}				
		OnStoryData:rkresearch01_dialog_done,keep
		{
			Mark=none,terep_Lair,NPC_konyvtaros,npc,main
		}
		#2-info		
		OnStoryData:Gnarlovoy_start_trigger,keep
		{
			Mark=new,terep_Lair,NPC_konyvtaros,npc,main
		}
		OnStoryData:rkresearch02_dialog_done,keep
		{
			Mark=none,terep_Lair,NPC_konyvtaros,npc,main
		}
		OnStoryData:rkresearch02v2_dialog_done,keep
		{
			Mark=none,terep_Lair,NPC_konyvtaros,npc,main
		}
		#3-info
		OnMapChanged:terep_Haunted_Forest02
		{
			Mark=new,terep_Lair,NPC_konyvtaros,npc,main
		}
		OnStoryData:rkresearch03_dialog_done,keep
		{
			Mark=none,terep_Lair,NPC_konyvtaros,npc,main
		}
		OnStoryData:rkresearch03v2_dialog_done,keep
		{
			Mark=none,terep_Lair,NPC_konyvtaros,npc,main
		}
		#4-info
		OnStoryData:Second_chapter_start,keep
		{
			Mark=new,terep_Lair,NPC_konyvtaros,npc,main
		}
		OnStoryData:rkresearch04_dialog_done,keep
		{
			Mark=none,terep_Lair,NPC_konyvtaros,npc,main
		}
		OnStoryData:rkresearch04v2_dialog_done,keep
		{
			Mark=none,terep_Lair,NPC_konyvtaros,npc,main
		}
		#5-info
		OnStoryData:Vampiregate_closed,keep
		{
			Mark=new,terep_Lair,NPC_konyvtaros,npc,main
		}
		OnStoryData:rkresearch05_dialog_done,keep
		{
			Mark=none,terep_Lair,NPC_konyvtaros,npc,main
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}

Ch1_TesFac_secretarea
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Secretarea_activator,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			SpawnMonster=Inkripper_VHIII_vet,Inkripper_VHIII_vet,terep_Testing_Facility,TesFac_secarea_spawn
			SpawnMonster=Inkripper_VHIII_vet,Inkripper_VHIII_vet,terep_Testing_Facility,TesFac_secarea_spawn
			SpawnMonster=Inkripper_VHIII_vet,Inkripper_VHIII_vet,terep_Testing_Facility,TesFac_secarea_spawn
			SpawnMonster=Inkripper_VHIII_vet,Inkripper_VHIII_vet,terep_Testing_Facility,TesFac_secarea_spawn
			SpawnMonster=Inkripper_VHIII_vet,Inkripper_VHIII_vet,terep_Testing_Facility,TesFac_secarea_spawn
			SpawnMonster=Inkripper_VHIII_vet,Inkripper_VHIII_vet,terep_Testing_Facility,TesFac_secarea_spawn
			SpawnMonster=Inkwraith_secret_elite,Inkwraith_secret_elite,terep_Testing_Facility,TesFac_secarea_spawn
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch1_Centaur_attack
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:start_centaur_attack,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			SpawnMonster=Centaur,Centaur_scr,terep_Haunted_Forest01,centaur_location1
			SpawnMonster=Centaur,Centaur_scr,terep_Haunted_Forest01,centaur_location1
			SpawnMonster=Centaur,Centaur_scr,terep_Haunted_Forest01,centaur_location1
			SpawnMonster=Centaur,Centaur_scr,terep_Haunted_Forest01,centaur_location1
			SpawnMonster=Centauress,Centauress_scr,terep_Haunted_Forest01,centaur_location1
			SpawnMonster=Centauress,Centauress_scr,terep_Haunted_Forest01,centaur_location1
			SpawnMonster=Centaur,Centaur_scr,terep_Haunted_Forest01,centaur_location2
			SpawnMonster=Centauress,Centauress_scr,terep_Haunted_Forest01,centaur_location2
			SpawnMonster=Centaur,Centaur_scr,terep_Haunted_Forest01,centaur_location2
			SpawnMonster=Centauress,Centauress_scr,terep_Haunted_Forest01,centaur_location2
			SpawnMonster=Centaur_Rampager,Centaur_Rampager_scr,terep_Haunted_Forest01,centaur_location3
			SpawnMonster=Centaur_Rampager,Centaur_Rampager_scr,terep_Haunted_Forest01,centaur_location3
			SpawnMonster=Centaur,Centaur_scr,terep_Haunted_Forest01,centaur_location4
			SpawnMonster=Centauress,Centauress_scr,terep_Haunted_Forest01,centaur_location4
			SpawnMonster=Centauress,Centauress_scr,terep_Haunted_Forest01,centaur_location4
			SpawnMonster=Centaur,Centaur_scr,terep_Haunted_Forest01,centaur_location4
			SpawnMonster=Centauress,Centauress_scr,terep_Haunted_Forest01,centaur_location4
			SpawnMonster=Centauress,Centauress_scr,terep_Haunted_Forest01,centaur_location4
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch1_gnarlovoy_attackers_counter
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnSoldierKilledName:gnarlovoy_attackers,terep_Ink_mocsar
		{
			CountSoldiers=terep_Ink_mocsar,gnarlovoy_attackers,Inkmonsters_remaining,name
		}
		OnVariableChanged:Inkmonsters_remaining,0
		{
			AddStoryData=Inkmonsters_remaining_zero
			SetStage=5
		}
	}
	Stage5
	{		
		State=Hidden
	}
}
Ch1_hag_necklace
{
	Chapter=0
	Stage0
	{
		State=Hidden
		OnStoryData:Oldwitch_dialog_done,keep
		{
			AddLoot=hag_necklace
		}
	}
}
Ch1_TF_ripley
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:drop_xenoacid,keep
		{
			SetPlayerActive=terep_Testing_Facility,ripley_player,true
			SetPlayerFaction=terep_Testing_Facility,ripley_player,1
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnItemGot:Xeno_acid,keep
		{
			EnableTrigger=terep_Testing_Facility,BNT_Lab_drinkxeno,true
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch1_Lair_alchemist_skrimbeast
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Gnarl_beast_done,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		Mark=new,terep_Lair,NPC_Lair_Alchemist,npc
		OnStoryData:lair_alchemist_yesskrim,keep
		{
			RemoveArtifact=Skrimbeast_innards,1
			AddLoot=Skrimbeast_potion
			SetStage=10
		}
		OnStoryData:lair_alchemist_noskrim,keep
		{
			RemoveArtifact=Skrimbeast_innards,1
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch1_Gnarl_riddle
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Gnarl_Riddle_Loot,keep
		{
			AddLoot=VH_Remastered_rare_fix,terep_Ink_mocsar,Gnarl_riddle_well_loot,dummy 
			AddLoot=VH_Remastered_rare_fix,terep_Ink_mocsar,Gnarl_riddle_well_loot,dummy 
			AddLoot=VH_Remastered_rare_fix,terep_Ink_mocsar,Gnarl_riddle_well_loot,dummy 
			AddLoot=VH_Remastered_gold_fix,terep_Ink_mocsar,Gnarl_riddle_well_loot,dummy
			SetStage=5
		}
	}
	Stage5
	{
		State=Hidden
	}
}
Ch1_Banya_banter
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Oldwitch_dialog_done,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{				
			EnableTrigger=terep_Haunted_Forest01,BNT_afterthewitch,true			
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch2_Oldtown_woundedman
{
	Chapter=0
	Stage0
	{
		State=Inactive
		Mark=new,terep_Ink_Old_Town,OT_Wounded_man,soldier
		OnStoryData:oldtown_wounded_kill,keep
		{
			SetPlayerActive=terep_Ink_Old_Town,OT_Wounded_man_player,true
			SetPlayerFaction=terep_Ink_Old_Town,OT_Wounded_man_player,1
			SetStage=5
		}
		OnStoryData:oldtown_wounded_vlados,keep
		{
			SetStage=10
		}
		OnStoryData:oldtown_wounded_leave,keep
		{
			SetStage=15
		}	
	}
	Stage5
	{
		State=Inactive
		OnSoldierKilledName:OT_Wounded_man,terep_Ink_Old_Town		
		{
			DelayedSpawnMonster=Vampirelord_Flying,Vampirelord_Flying,terep_Ink_Old_Town,oldtown_wounded_spawn1,player,Wounded_man_attackers
			DelayedSpawnMonster=Vampire_WarLord,Vampire_WarLord,terep_Ink_Old_Town,oldtown_wounded_spawn2,player,Wounded_man_attackers
			DelayedSpawnMonster=Vampirelord_Flying,Vampirelord_Flying,terep_Ink_Old_Town,oldtown_wounded_spawn3,player,Wounded_man_attackers
			DelayedSpawnMonster=Meatservant,Meatservant,terep_Ink_Old_Town,oldtown_wounded_spawn4,player,Wounded_man_attackers
			DelayedSpawnMonster=Meatservant,Meatservant,terep_Ink_Old_Town,oldtown_wounded_spawn5,player,Wounded_man_attackers
			DelayedSpawnMonster=Meatservant,Meatservant,terep_Ink_Old_Town,oldtown_wounded_spawn6,player,Wounded_man_attackers
			SetStage=15
		}
	}
	Stage10
	{
		State=Inactive
		Mark=new,terep_Lair,NPC_CountVlados,npc
		OnStoryData:vlados_woundedman_saved,keep
		{
			SetStage=15
		}	
	}
	Stage15
	{
		State=Hidden
	}

}

Ch2_Oldtown_ambushes
{
	Chapter=0
	Stage0
	{
		State=Hidden
		OnStoryData:Ambush_pier_location,keep
		{
			DelayedSpawnMonster=Meatservant_vet,Meatservant_vet,terep_Ink_Old_Town,Ambush_pier1,player,Ambush_pier_location
			DelayedSpawnMonster=Meatservant_vet,Meatservant_vet,terep_Ink_Old_Town,Ambush_pier1,player,Ambush_pier_location
			DelayedSpawnMonster=Vampire_WarLord,Vampire_WarLord,terep_Ink_Old_Town,Ambush_pier2,player,Ambush_pier_location
			DelayedSpawnMonster=Meatservant_vet,Meatservant_vet,terep_Ink_Old_Town,Ambush_pier2,player,Ambush_pier_location
			DelayedSpawnMonster=Nosferatu,Nosferatu,terep_Ink_Old_Town,Ambush_pier3,player,Ambush_pier_location
			DelayedSpawnMonster=Meatservant_vet,Meatservant_vet,terep_Ink_Old_Town,Ambush_pier3,player,Ambush_pier_location
			DelayedSpawnMonster=Quag_Thing,Quag_Thing,terep_Ink_Old_Town,Ambush_pier4,player,Ambush_pier_location
			DelayedSpawnMonster=Meatservant,Meatservant,terep_Ink_Old_Town,Ambush_pier5,player,Ambush_pier_location
			DelayedSpawnMonster=Meatservant,Meatservant,terep_Ink_Old_Town,Ambush_pier5,player,Ambush_pier_location
			DelayedSpawnMonster=Meatservant,Meatservant,terep_Ink_Old_Town,Ambush_pier5,player,Ambush_pier_location
			DelayedSpawnMonster=Quag_Thing_vet,Quag_Thing_vet,terep_Ink_Old_Town,Ambush_pier6,player,Ambush_pier_location
		}
		OnStoryData:Ambush_fallen_building,keep
		{
			DelayedSpawnMonster=Vampirelord_flying,Vampirelord_flying,terep_Ink_Old_Town,Ambush_building1,player,Ambush_fallen_building
			DelayedSpawnMonster=Sticlizard,Sticlizard,terep_Ink_Old_Town,Ambush_building1,player,Ambush_fallen_building
			DelayedSpawnMonster=Nosferatu,Nosferatu,terep_Ink_Old_Town,Ambush_building1,player,Ambush_fallen_building
			DelayedSpawnMonster=Sticlizard,Sticlizard,terep_Ink_Old_Town,Ambush_building2,player,Ambush_fallen_building
			DelayedSpawnMonster=Sticlizard,Sticlizard,terep_Ink_Old_Town,Ambush_building2,player,Ambush_fallen_building
			DelayedSpawnMonster=Vampirelord_flying_vet,Vampirelord_flying_vet,terep_Ink_Old_Town,Ambush_building2,player,Ambush_fallen_building
			DelayedSpawnMonster=Sticlizard,Sticlizard,terep_Ink_Old_Town,Ambush_building3,player,Ambush_fallen_building
			DelayedSpawnMonster=Nosferatu,Nosferatu,terep_Ink_Old_Town,Ambush_building3,player,Ambush_fallen_building
			DelayedSpawnMonster=Vampire_WarLord_Elite,Vampire_WarLord_Elite,terep_Ink_Old_Town,Ambush_building3,player,Ambush_fallen_building
			DelayedSpawnMonster=Sticlizard,Sticlizard,terep_Ink_Old_Town,Ambush_building4,player,Ambush_fallen_building
			DelayedSpawnMonster=Vampirelord_flying,Vampirelord_flying,terep_Ink_Old_Town,Ambush_building4,player,Ambush_fallen_building
			DelayedSpawnMonster=Vampirelord_flying,Vampirelord_flying,terep_Ink_Old_Town,Ambush_building4,player,Ambush_fallen_building
		}
		OnStoryData:Ambush_alley,keep
		{
			DelayedSpawnMonster=Quag_Thing,Quag_Thing,terep_Ink_Old_Town,Ambush_alley1,player,Ambush_alley
			DelayedSpawnMonster=Quag_Thing,Quag_Thing,terep_Ink_Old_Town,Ambush_alley1,player,Ambush_alley
			DelayedSpawnMonster=Vampire_WarLord,Vampire_WarLord,terep_Ink_Old_Town,Ambush_alley1,player,Ambush_alley
			DelayedSpawnMonster=Meatservant_vet,Meatservant_vet,terep_Ink_Old_Town,Ambush_alley2,player,Ambush_alley
			DelayedSpawnMonster=Marauder_vet,Marauder_vet,terep_Ink_Old_Town,Ambush_alley2,player,Ambush_alley
			DelayedSpawnMonster=Underdweller,Underdweller,terep_Ink_Old_Town,Ambush_alley2,player,Ambush_alley
		}
	}
}
Ch2_DK_domovoy
{
	Chapter=0
	Stage0
	{
		State=Inactive
		Mark=new,terep_Dark_Carnival,NPC_Domovoy,soldier
		OnStoryData:DK_domovoy_no,keep
		{
			SetStage=5
		}
		OnStoryData:DK_domovoy_done,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Hidden
	}
}
Ch2_Ambush_Carnival_bridge
{
	Chapter=0
	Stage0
	{
		State=Hidden
		OnStoryData:Ambush_DK_bridge1,keep
		{
			DelayedSpawnMonster=Mysterious_Cerambyx_champ,Mysterious_Cerambyx_champ,terep_Dark_Carnival,Ambush_spawn1,player,Ambush_DK_bridge1
			DelayedSpawnMonster=Mysterious_Cerambyx,Mysterious_Cerambyx,terep_Dark_Carnival,Ambush_spawn1,player,Ambush_DK_bridge1
			DelayedSpawnMonster=Killer_Clown_vet,Killer_Clown_vet,terep_Dark_Carnival,Ambush_spawn1,player,Ambush_DK_bridge1
			DelayedSpawnMonster=Killer_Clown_vet,Killer_Clown_vet,terep_Dark_Carnival,Ambush_spawn1,player,Ambush_DK_bridge1
		}
		OnStoryData:Ambush_DK_bridge2,keep
		{
			DelayedSpawnMonster=Massacrare_Brothers,Massacrare_Brothers,terep_Dark_Carnival,Ambush_spawn2,player,Ambush_DK_bridge2
			DelayedSpawnMonster=Great_Cerambyx,Great_Cerambyx,terep_Dark_Carnival,Ambush_spawn2,player,Ambush_DK_bridge2
			DelayedSpawnMonster=Killer_Clown_vet,Killer_Clown_vet,terep_Dark_Carnival,Ambush_spawn2,player,Ambush_DK_bridge2
			DelayedSpawnMonster=Killer_Clown_vet,Killer_Clown_vet,terep_Dark_Carnival,Ambush_spawn2,player,Ambush_DK_bridge2
		}
	}
}

Ch2_Hag_necklace
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Oldwitch_dialog_done,keep
		{
			Mark=new,terep_Nightmare_Hollow01,Rotting_Abomination_necklace,soldier,main
		}
		OnStoryData:NH_necklace_fight,keep
		{
			SetStage=5
		}
		OnStoryData:NH_necklace_sold,keep
		{
			RemoveArtifact=hag_necklace,1
			Mark=none,terep_Nightmare_Hollow01,Rotting_Abomination_necklace,soldier,main
			AddLoot=man_eating_loot2,terep_Nightmare_Hollow01,hag_necklace_lootdrop,dummy
			AddLoot=man_eating_loot2,terep_Nightmare_Hollow01,hag_necklace_lootdrop,dummy
			AddLoot=man_eating_loot2,terep_Nightmare_Hollow01,hag_necklace_lootdrop,dummy
			AddLoot=man_eating_loot2,terep_Nightmare_Hollow01,hag_necklace_lootdrop,dummy
			SetStage=15
		}
	}
	Stage5
	{
		State=Inactive
		OnSet	
		{
			Mark=none,terep_Nightmare_Hollow01,Rotting_Abomination_necklace,soldier,main
			SetPlayerActive=terep_Nightmare_Hollow01,Hag_necklace_undead,true
			SetPlayerFaction=terep_Nightmare_Hollow01,Hag_necklace_undead,1
			SetStage=10
		}
	}
	Stage10
	{
		State=Inactive
		OnSoldierKilledName:Rotting_Abomination_necklace,terep_Nightmare_Hollow01
		{
			SetStage=20
		}
	}
	Stage15
	{
		State=Hidden
	}
	Stage20
	{
		State=Hidden
	}
}

Ch2_NH_hidden_pathways_spawnvampires
{
	Chapter=0
	Stage0
	{
		State=Hidden
		OnStoryData:NH_hiddenpath_vampirespawn,keep
		{
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn3,player,hidden_vampire_7
			SpawnMonster=Nosferatu,Nosferatu,terep_Nightmare_Hollow03,hidden_vamp_spawn3,player,hidden_vampire_7
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn3,player,hidden_vampire_7
			SpawnMonster=Nosferatu,Nosferatu,terep_Nightmare_Hollow03,hidden_vamp_spawn3,player,hidden_vampire_7
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn4,player,hidden_vampire_7
			SpawnMonster=Vampirelord_melee,Vampirelord_melee,terep_Nightmare_Hollow03,hidden_vamp_spawn4,player,hidden_vampire_7
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn4,player,hidden_vampire_7
			SpawnMonster=Vampirelord_melee,Vampirelord_melee,terep_Nightmare_Hollow03,hidden_vamp_spawn4,player,hidden_vampire_7
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn5,player,hidden_vampire_7
			SpawnMonster=Vampirelord_flying_vet,Vampirelord_flying_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn5,player,hidden_vampire_7
			SpawnMonster=Shrieking_Widow,Shrieking_Widow,terep_Nightmare_Hollow03,hidden_vamp_spawn5,player,hidden_vampire_7
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn5,player,hidden_vampire_7
			SpawnMonster=Vampirelord_flying_vet,Vampirelord_flying_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn5,player,hidden_vampire_7
			SpawnMonster=Shrieking_Widow,Shrieking_Widow,terep_Nightmare_Hollow03,hidden_vamp_spawn5,player,hidden_vampire_7
			#spawn_6
			SpawnMonster=Spectral_Guardsman,Spectral_Guardsman,terep_Nightmare_Hollow03,hidden_vamp_spawn6,player,hidden_vampire_8
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn6,player,hidden_vampire_8
			SpawnMonster=Spectral_Guardsman,Spectral_Guardsman,terep_Nightmare_Hollow03,hidden_vamp_spawn6,player,hidden_vampire_8
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn6,player,hidden_vampire_8
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn6,player,hidden_vampire_8
			SpawnMonster=Vampirelord_melee_vet,Vampirelord_melee_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn6,player,hidden_vampire_8
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn6,player,hidden_vampire_8
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn6,player,hidden_vampire_8
			#Spawn_7
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn7,player,hidden_vampire_9
			SpawnMonster=Vampirelord_flying_vet,Vampirelord_flying_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn7,player,hidden_vampire_9
			SpawnMonster=Vampirelord_flying_vet,Vampirelord_flying_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn7,player,hidden_vampire_9
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn7,player,hidden_vampire_9
			SpawnMonster=Nosferatu,Nosferatu,terep_Nightmare_Hollow03,hidden_vamp_spawn7,player,hidden_vampire_9
			SpawnMonster=Shrieking_Widow,Shrieking_Widow,terep_Nightmare_Hollow03,hidden_vamp_spawn7,player,hidden_vampire_9
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn7,player,hidden_vampire_9
			SpawnMonster=Nosferatu,Nosferatu,terep_Nightmare_Hollow03,hidden_vamp_spawn7,player,hidden_vampire_9
			SpawnMonster=Shrieking_Widow,Shrieking_Widow,terep_Nightmare_Hollow03,hidden_vamp_spawn7,player,hidden_vampire_9
			#Spawn_8
			SpawnMonster=Vampirelord_flying,Vampirelord_flying,terep_Nightmare_Hollow03,hidden_vamp_spawn8,player,hidden_vampire_10
			SpawnMonster=Vampirelord_melee,Vampirelord_melee,terep_Nightmare_Hollow03,hidden_vamp_spawn8,player,hidden_vampire_10
			SpawnMonster=Vampirelord_flying_vet,Vampirelord_flying_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn8,player,hidden_vampire_10
			SpawnMonster=Vampirelord_melee_vet,Vampirelord_melee_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn8,player,hidden_vampire_10
			SpawnMonster=Vampirelord_melee,Vampirelord_melee,terep_Nightmare_Hollow03,hidden_vamp_spawn8,player,hidden_vampire_10
			SpawnMonster=Spectral_Guardsman,Spectral_Guardsman,terep_Nightmare_Hollow03,hidden_vamp_spawn8,player,hidden_vampire_10
			SpawnMonster=Vampirelord_melee_vet,Vampirelord_melee_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn8,player,hidden_vampire_10
			SpawnMonster=Vampirelord_melee,Vampirelord_melee,terep_Nightmare_Hollow03,hidden_vamp_spawn8,player,hidden_vampire_10
			SpawnMonster=Spectral_Guardsman,Spectral_Guardsman,terep_Nightmare_Hollow03,hidden_vamp_spawn8,player,hidden_vampire_10
			#spawn_9			
			SpawnMonster=Nosferatu_vet,Nosferatu_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn9,player,hidden_vampire_11
			SpawnMonster=Nosferatu_vet,Nosferatu_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn9,player,hidden_vampire_11
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn9,player,hidden_vampire_11
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn9,player,hidden_vampire_11
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn9,player,hidden_vampire_11
			SpawnMonster=Vampirelord_melee,Vampirelord_melee,terep_Nightmare_Hollow03,hidden_vamp_spawn9,player,hidden_vampire_11
			SpawnMonster=Shrieking_Widow,Shrieking_Widow,terep_Nightmare_Hollow03,hidden_vamp_spawn9,player,hidden_vampire_11
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn9,player,hidden_vampire_11
			SpawnMonster=Vampirelord_melee,Vampirelord_melee,terep_Nightmare_Hollow03,hidden_vamp_spawn9,player,hidden_vampire_11
			SpawnMonster=Shrieking_Widow,Shrieking_Widow,terep_Nightmare_Hollow03,hidden_vamp_spawn9,player,hidden_vampire_11
		}
		OnStoryData:NH_hiddenpath_vampirespawn2,keep
		{
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn10,player,hidden_vampire_12
			SpawnMonster=Nosferatu,Nosferatu,terep_Nightmare_Hollow03,hidden_vamp_spawn10,player,hidden_vampire_12
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn10,player,hidden_vampire_12
			SpawnMonster=Vampirelord_melee,Vampirelord_melee,terep_Nightmare_Hollow03,hidden_vamp_spawn10,player,hidden_vampire_12
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn10,player,hidden_vampire_12
			SpawnMonster=Vampirelord_flying_vet,Vampirelord_flying_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn10,player,hidden_vampire_12
			SpawnMonster=Vampirelord_melee,Vampirelord_melee,terep_Nightmare_Hollow03,hidden_vamp_spawn10,player,hidden_vampire_12
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn10,player,hidden_vampire_12
			SpawnMonster=Vampirelord_flying_vet,Vampirelord_flying_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn10,player,hidden_vampire_12
			#spawn_11
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn11,player,hidden_vampire_13
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn11,player,hidden_vampire_13
			SpawnMonster=Vampirelord_melee_vet,Vampirelord_melee_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn11,player,hidden_vampire_13
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn11,player,hidden_vampire_13
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn11,player,hidden_vampire_13
			SpawnMonster=Shrieking_Widow,Shrieking_Widow,terep_Nightmare_Hollow03,hidden_vamp_spawn11,player,hidden_vampire_13
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn11,player,hidden_vampire_13
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn11,player,hidden_vampire_13
			SpawnMonster=Shrieking_Widow,Shrieking_Widow,terep_Nightmare_Hollow03,hidden_vamp_spawn11,player,hidden_vampire_13
			#Spawn_12
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn12,player,hidden_vampire_14
			SpawnMonster=Vampirelord_flying_vet,Vampirelord_flying_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn12,player,hidden_vampire_14
			SpawnMonster=Vampirelord_flying_vet,Vampirelord_flying_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn12,player,hidden_vampire_14
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn12,player,hidden_vampire_14
			SpawnMonster=Nosferatu,Nosferatu,terep_Nightmare_Hollow03,hidden_vamp_spawn12,player,hidden_vampire_14
			SpawnMonster=Shrieking_Widow,Shrieking_Widow,terep_Nightmare_Hollow03,hidden_vamp_spawn12,player,hidden_vampire_14
			SpawnMonster=Spectral_Guardsman,Spectral_Guardsman,terep_Nightmare_Hollow03,hidden_vamp_spawn12,player,hidden_vampire_14
			SpawnMonster=Nosferatu,Nosferatu,terep_Nightmare_Hollow03,hidden_vamp_spawn12,player,hidden_vampire_14
			SpawnMonster=Shrieking_Widow,Shrieking_Widow,terep_Nightmare_Hollow03,hidden_vamp_spawn12,player,hidden_vampire_14
			SpawnMonster=Spectral_Guardsman,Spectral_Guardsman,terep_Nightmare_Hollow03,hidden_vamp_spawn12,player,hidden_vampire_14
			#Spawn_13
			SpawnMonster=Vampirelord_flying,Vampirelord_flying,terep_Nightmare_Hollow03,hidden_vamp_spawn13,player,hidden_vampire_15
			SpawnMonster=Vampirelord_melee,Vampirelord_melee,terep_Nightmare_Hollow03,hidden_vamp_spawn13,player,hidden_vampire_15
			SpawnMonster=Vampirelord_flying_vet,Vampirelord_flying_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn13,player,hidden_vampire_15
			SpawnMonster=Vampirelord_melee_vet,Vampirelord_melee_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn13,player,hidden_vampire_15
			SpawnMonster=Vampirelord_melee,Vampirelord_melee,terep_Nightmare_Hollow03,hidden_vamp_spawn13,player,hidden_vampire_15
			SpawnMonster=Spectral_Guardsman,Spectral_Guardsman,terep_Nightmare_Hollow03,hidden_vamp_spawn13,player,hidden_vampire_15
			SpawnMonster=Vampirelord_melee,Vampirelord_melee,terep_Nightmare_Hollow03,hidden_vamp_spawn13,player,hidden_vampire_15
			SpawnMonster=Spectral_Guardsman,Spectral_Guardsman,terep_Nightmare_Hollow03,hidden_vamp_spawn13,player,hidden_vampire_15
			#spawn_14			
			SpawnMonster=Nosferatu_vet,Nosferatu_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn14,player,hidden_vampire_16
			SpawnMonster=Nosferatu_vet,Nosferatu_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn14,player,hidden_vampire_16
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn14,player,hidden_vampire_16
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn14,player,hidden_vampire_16
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn14,player,hidden_vampire_16
			SpawnMonster=Vampirelord_melee,Vampirelord_melee,terep_Nightmare_Hollow03,hidden_vamp_spawn14,player,hidden_vampire_16
			SpawnMonster=Shrieking_Widow,Shrieking_Widow,terep_Nightmare_Hollow03,hidden_vamp_spawn14,player,hidden_vampire_16
			SpawnMonster=Vampirelord_melee,Vampirelord_melee,terep_Nightmare_Hollow03,hidden_vamp_spawn14,player,hidden_vampire_16
			SpawnMonster=Shrieking_Widow,Shrieking_Widow,terep_Nightmare_Hollow03,hidden_vamp_spawn14,player,hidden_vampire_16
		}
		OnStoryData:NH_hiddenpath_cutscene5,keep
		{
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn15,player,hidden_vampire_17
			SpawnMonster=Nosferatu,Nosferatu,terep_Nightmare_Hollow03,hidden_vamp_spawn10,player,hidden_vampire_17
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn15,player,hidden_vampire_17
			SpawnMonster=Vampirelord_melee,Vampirelord_melee,terep_Nightmare_Hollow03,hidden_vamp_spawn15,player,hidden_vampire_17
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn15,player,hidden_vampire_17
			SpawnMonster=Vampirelord_flying_vet,Vampirelord_flying_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn15,player,hidden_vampire_17
			SpawnMonster=Vampirelord_flying_champ,Vampirelord_flying_champ,terep_Nightmare_Hollow03,hidden_vamp_spawn15,player,hidden_vampire_17
			SpawnMonster=Nosferatu,Nosferatu,terep_Nightmare_Hollow03,hidden_vamp_spawn15,player,hidden_vampire_17
			SpawnMonster=Shrieking_Widow,Shrieking_Widow,terep_Nightmare_Hollow03,hidden_vamp_spawn15,player,hidden_vampire_17
			SpawnMonster=Spectral_Guardsman,Spectral_Guardsman,terep_Nightmare_Hollow03,hidden_vamp_spawn15,player,hidden_vampire_17
			#spawn_16
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn16,player,hidden_vampire_18
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn16,player,hidden_vampire_18
			SpawnMonster=Vampirelord_melee_vet,Vampirelord_melee_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn16,player,hidden_vampire_18
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn16,player,hidden_vampire_18
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn16,player,hidden_vampire_18
			SpawnMonster=Vampirelord_melee_champ,Vampirelord_melee_champ,terep_Nightmare_Hollow03,hidden_vamp_spawn16,player,hidden_vampire_18
			SpawnMonster=Vampirelord_melee_vet,Vampirelord_melee_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn16,player,hidden_vampire_18
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn16,player,hidden_vampire_18
						
			#Spawn_17
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn17,player,hidden_vampire_19
			SpawnMonster=Nosferatu,Nosferatu,terep_Nightmare_Hollow03,hidden_vamp_spawn17,player,hidden_vampire_19
			SpawnMonster=Vampirelord_flying_vet,Vampirelord_flying_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn17,player,hidden_vampire_19
			SpawnMonster=Vampirelord_flying_vet,Vampirelord_flying_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn17,player,hidden_vampire_19
			SpawnMonster=Meatservant,Meatservant,terep_Nightmare_Hollow03,hidden_vamp_spawn17,player,hidden_vampire_19
			SpawnMonster=Nosferatu,Nosferatu,terep_Nightmare_Hollow03,hidden_vamp_spawn17,player,hidden_vampire_19
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn17,player,hidden_vampire_19
			SpawnMonster=Meatservant_vet,Meatservant_vet,terep_Nightmare_Hollow03,hidden_vamp_spawn17,player,hidden_vampire_19
			SpawnMonster=Vampirelord_flying_champ,Vampirelord_flying_champ,terep_Nightmare_Hollow03,hidden_vamp_spawn17,player,hidden_vampire_19
			SpawnMonster=Shrieking_Widow,Shrieking_Widow,terep_Nightmare_Hollow03,hidden_vamp_spawn17,player,hidden_vampire_19
		}
	}
}
Ch1_Missiontech2
{
	Chapter=0
	Stage0
	{			
		State=Inactive		
		OnStoryData:RM_Borgoland,keep
		{
			SendRadioReport=Commander_Petrov,MS_Borgoland
		}
		OnStoryData:RM_Kidnapped_lieutenant,keep
		{
			SendRadioReport=Commander_Petrov,MS_Kidnapped_lieutenant
			AddResistanceSoldierCap=8
		}		
		OnStoryData:Third_chapter_start,keep
		{
			SetStage=10
			AddResistanceSoldierCap=15
		}
	}
	Stage10
	{
		State=Hidden
	}
}

Ch1_Missiontech3
{
	Chapter=0
	Stage0
	{			
		State=Inactive
		OnStoryData:RM_Lab_riot,keep
		{
			SendRadioReport=Commander_Petrov,MS_Labriot
		}						
		OnStoryData:TD8_start,keep
		{
			SendRadioReport=Commander_Petrov,MS_TD2			
			AddResistanceSoldierCap=7
		}			
		OnSoldierKilledName:BloodRabbit,terep_Ink_frozen
		{
			AddStoryData=hc_bloodrabbit_killed
		}
		OnItemGot:Beard_Essence
		{
			AddStoryData=hc_beardgrease_itemgot
		}
		OnStoryData:BNT_hc_buzamezo,keep
		{
			AddLoot=VH_Remastered_rare_fix,terep_Ink_mythical,hc_buzamezo_loot,dummy
			AddLoot=VH_Remastered_gold_fix,terep_Ink_mythical,hc_buzamezo_loot,dummy
			AddLoot=VH_Remastered_gold_fix,terep_Ink_mythical,hc_buzamezo_loot,dummy
			AddLoot=VH_Remastered_gold_fix,terep_Ink_mythical,hc_buzamezo_loot,dummy
			AddLoot=VH_Remastered_gold_fix,terep_Ink_mythical,hc_buzamezo_loot,dummy
			AddLoot=VH_Remastered_rare_fix,terep_Ink_mythical,hc_buzamezo_loot,dummy
			AddLoot=VH_Remastered_gold_fix,terep_Ink_mythical,hc_buzamezo_loot,dummy
		}
		OnStoryData:hc_szoborfelirat_done,keep
		{
			AddLoot=VH_Remastered_rare_fix,terep_Ink_mythical,hc_szoborfelirat_loot,dummy
			AddLoot=VH_Remastered_gold_fix,terep_Ink_mythical,hc_szoborfelirat_loot,dummy
			AddLoot=VH_Remastered_gold_fix,terep_Ink_mythical,hc_szoborfelirat_loot,dummy
			AddLoot=VH_Remastered_gold_fix,terep_Ink_mythical,hc_szoborfelirat_loot,dummy
		}
		OnStoryData:myth_sirko_lootdrop,keep
		{
			AddLoot=VH_Remastered_rare_fix,terep_Ink_mythical,myth_sirko_lootdrop,dummy
			AddLoot=VH_Remastered_gold_fix,terep_Ink_mythical,myth_sirko_lootdrop,dummy
			AddLoot=VH_Remastered_gold_fix,terep_Ink_mythical,myth_sirko_lootdrop,dummy
			AddLoot=VH_Remastered_gold_fix,terep_Ink_mythical,myth_sirko_lootdrop,dummy
		}
		OnStoryData:myth_haytsack_lootdrop,keep
		{
			
			AddLoot=VH_Remastered_gold_fix,terep_Ink_mythical,myth_haytsack_lootdrop,dummy
			AddLoot=VH_Remastered_gold_fix,terep_Ink_mythical,myth_haytsack_lootdrop,dummy
		}
		
		OnStoryData:hc_atlantis_done,keep
		{
			AddLoot=Man_from_atlantis_book,terep_Ink_glass2,hc_atlantis_book_drop,dummy
		}	
		OnStoryData:hc_inquisitorarmor_done,keep
		{
			SetObjectVisible=terep_Ink_darkness,bolter,false
			AddLoot=inkvizicios_bolter
		}
		OnStoryData:Fourth_chapter_start,keep
		{
			AddResistanceSoldierCap=9
			SetStage=10
		}
		OnStoryData:Act3_Ch3_delete_storydata,keep
		{
			EnableTrigger=terep_Ink_mythical,minotaur_hostage_location,false
			EnableTrigger=terep_Clockwork_Keep,CK_flux_rm1,false
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch3_Ink_Darkness_Ambushes
{
	Chapter=0
	Stage0
	{
		State=Hidden
		OnStoryData:Dark_ambush_location1,keep
		{
			DelayedSpawnMonster=Bonechopper,Bonechopper,terep_Ink_darkness,Ambush1_1,player,Dark_ambush_location1
			DelayedSpawnMonster=Bonechopper,Bonechopper,terep_Ink_darkness,Ambush1_1,player,Dark_ambush_location1
			DelayedSpawnMonster=Bonechopper_champ,Bonechopper_champ,terep_Ink_darkness,Ambush1_1,player,Dark_ambush_location1
			DelayedSpawnMonster=Sting_heeled_jack_min,Sting_heeled_jack_min,terep_Ink_darkness,Ambush1_2,player,Dark_ambush_location1
			DelayedSpawnMonster=Sting_heeled_jack_min,Sting_heeled_jack_min,terep_Ink_darkness,Ambush1_2,player,Dark_ambush_location1
			DelayedSpawnMonster=Bonechopper,Bonechopper,terep_Ink_darkness,Ambush1_2,player,Dark_ambush_location1
		}
		OnStoryData:Dark_ambush_location2,keep
		{
			DelayedSpawnMonster=Bonechopper_champ,Bonechopper_champ,terep_Ink_darkness,Ambush2_1,player,Dark_ambush_location2
			DelayedSpawnMonster=Bonechopper,Bonechopper,terep_Ink_darkness,Ambush2_2,player,Dark_ambush_location2
			DelayedSpawnMonster=Bonechopper,Bonechopper,terep_Ink_darkness,Ambush2_3,player,Dark_ambush_location2
			DelayedSpawnMonster=Bonechopper_champ,Bonechopper_champ,terep_Ink_darkness,Ambush2_1,player,Dark_ambush_location2
			DelayedSpawnMonster=Bonechopper,Bonechopper,terep_Ink_darkness,Ambush2_2,player,Dark_ambush_location2
			DelayedSpawnMonster=Bonechopper_champ,Bonechopper_champ,terep_Ink_darkness,Ambush2_3,player,Dark_ambush_location2
		}
		OnStoryData:Dark_ambush_location3,keep
		{
			DelayedSpawnMonster=Inkwraith_vet,Inkwraith_vet,terep_Ink_darkness,Ambush3_1,player,Dark_ambush_location3
			DelayedSpawnMonster=Inkwraith_vet,Inkwraith_vet,terep_Ink_darkness,Ambush3_1,player,Dark_ambush_location3
			DelayedSpawnMonster=Sting_heeled_jack_min,Sting_heeled_jack_min,terep_Ink_darkness,Ambush3_2,player,Dark_ambush_location3
			DelayedSpawnMonster=Inkwraith_vet,Inkwraith_vet,terep_Ink_darkness,Ambush3_2,player,Dark_ambush_location3
			DelayedSpawnMonster=Inkwraith_vet,Inkwraith_vet,terep_Ink_darkness,Ambush3_2,player,Dark_ambush_location3
			DelayedSpawnMonster=Sting_heeled_jack_min,Sting_heeled_jack_min,terep_Ink_darkness,Ambush3_2,player,Dark_ambush_location3
		}
		OnStoryData:Dark_ambush_location4,keep
		{
			DelayedSpawnMonster=Inkwraith_champ,Inkwraith_champ,terep_Ink_darkness,Ambush4_1,player,Dark_ambush_location4
			DelayedSpawnMonster=Inkwraith_champ,Inkwraith_champ,terep_Ink_darkness,Ambush4_1,player,Dark_ambush_location4
			DelayedSpawnMonster=Sting_heeled_jack_min,Sting_heeled_jack_min,terep_Ink_darkness,Ambush4_2,player,Dark_ambush_location4
			DelayedSpawnMonster=Bonechopper,Bonechopper,terep_Ink_darkness,Ambush4_2,player,Dark_ambush_location4
			DelayedSpawnMonster=Inkwraith_champ,Inkwraith_champ,terep_Ink_darkness,Ambush4_1,player,Dark_ambush_location4
			DelayedSpawnMonster=Bonechopper,Bonechopper,terep_Ink_darkness,Ambush4_1,player,Dark_ambush_location4
			DelayedSpawnMonster=Sting_heeled_jack_min,Sting_heeled_jack_min,terep_Ink_darkness,Ambush4_2,player,Dark_ambush_location4
			DelayedSpawnMonster=Bonechopper,Bonechopper,terep_Ink_darkness,Ambush4_2,player,Dark_ambush_location4
		}
		OnStoryData:Dark_ambush_location5,keep
		{
			DelayedSpawnMonster=Inkwraith_vet,Inkwraith_vet,terep_Ink_darkness,Ambush5_1,player,Dark_ambush_location5
			DelayedSpawnMonster=Inkwraith_vet,Inkwraith_vet,terep_Ink_darkness,Ambush5_2,player,Dark_ambush_location5
			DelayedSpawnMonster=Inkwraith_vet,Inkwraith_vet,terep_Ink_darkness,Ambush5_3,player,Dark_ambush_location5
			DelayedSpawnMonster=Inkwraith_vet,Inkwraith_vet,terep_Ink_darkness,Ambush5_4,player,Dark_ambush_location5
			DelayedSpawnMonster=Inkwraith_vet,Inkwraith_vet,terep_Ink_darkness,Ambush5_5,player,Dark_ambush_location5
			DelayedSpawnMonster=Inkwraith_vet,Inkwraith_vet,terep_Ink_darkness,Ambush5_6,player,Dark_ambush_location5
		}
	}
}
Ch3_Lair_boltos_dreamer
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Terror_dreamer_done,keep
		{
			EnableTrigger=terep_Lair,BNT_Lair_dreamer_artifact,true
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:BNT_Lair_dreamer_artifact,keep
		{
			RemoveArtifact=Dreamer_artifact,1
			AddLoot=SP_dreamer_inert_artifact
			SetStage=6
		}
	}
	Stage6
	{
		State=Inactive
		Mark=new,terep_Lair,NPC_Lair_Alchemist,npc
		OnStoryData:Lair_dreamer_deal,keep
		{
			RemoveArtifact=Dreamer_inert_artifact,1
			AddLoot=SP_dreamer_artifact_useful
			SetStage=10
		}
		OnStoryData:Lair_dreamer_nodeal,keep
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch4_CK_Klockmeister
{
	Chapter=0
	Stage0
	{			
		State=Inactive
		Mark=new,terep_Clockwork_Keep,NPC_Klockmeister,NPC,main
		OnStoryData:ck_clockmeister_start,keep
		{
			SetStage=5
		}
		OnStoryData:ck_clockmeister_noquest,keep
		{
			SetStage=10
		}
	}
	Stage5
	{
		State=Inactive
		Mark=new,terep_Clockwork_Keep,NPC_Klockmeister,NPC,main
		OnStoryData:ck_clockmeister_rightcount,keep
		{
			AddLoot=VH_Remastered_rare_fix,terep_Clockwork_Keep,clockmeister_count_loc,dummy
			AddLoot=VH_Remastered_rare_fix,terep_Clockwork_Keep,clockmeister_count_loc,dummy
			AddLoot=VH_Remastered_gold_fix,terep_Clockwork_Keep,clockmeister_count_loc,dummy
			SetStage=10
		}			
		OnStoryData:ck_clockmeister_wrongcount,keep
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}
Ch1_Missiontech4
{
	Chapter=0
	Stage0
	{			
		State=Inactive						
		OnStoryData:TD9_start,keep
		{
			SendRadioReport=Commander_Petrov,MS_TD3			
			AddResistanceSoldierCap=5
		}
		OnStoryData:RM_Heroic_suicide_start,keep
		{
			SendRadioReport=Commander_Petrov,MS_Heroic_suicide
			Mark=new,terep_Lair,NPC_res_commander,npc		
		}
		OnStoryData:hc_koschei_fragment_found,keep
		{
			AddLoot=Hell_Koscheideath_fragment,terep_Pokol2,hc_koschei_fragment_drop,dummy
		}
		OnStoryData:hc_guidebook_done,keep
		{
			AddLoot=Hell_guidebook,terep_Pokol2,hc_guidebook_drop,dummy
		}
		OnStoryData:hc_titanhus_recipe_done,keep
		{
			AddLoot=Hell_titan_recipebook,terep_Pokol2,hc_recipebook_drop,dummy
		}
		#ez itt blfsz megoldas helye
		OnStoryData:BNT_hc_titan_kard,keep
		{
			AddStoryData=hc_titan_kard_done
		}
		OnSoldierKilledName:suicide_domovoi,terep_kapubirtok
		{
			AddStoryData=hc_gate_domovoy_killed
		}		
		OnStoryData:dlg_HM_done,keep
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
		OnSet
		{
			Mark=none,terep_Lair,NPC_res_commander,npc
		}
		OnStoryData:HM_personally,keep
		{
			AddStoryData=RM_Heroic_suicide
			AddStoryData=RM_Heroic_support
		}
		OnStoryData:HM_commander,keep
		{
			AddStoryData=RM_Heroic_suicide
			AddStoryData=RM_Heroic_support
			ForceSendCaptain=NPC_Ivan_Tsarevich,Heroicsuicide
			ForceSendCaptain=NPC_Baron_Upyr,Heroicsupport
		}		
	}
}
Ch4_Hell_titan_flesh_taster
{
	Chapter=0
	Stage0
	{			
		State=Inactive
		OnStoryData:hell_titan_end,keep
		{
			EnableTrigger=terep_Pokol1,titanflesh_dialog_activator,true
			SetStage=5
		}						
	}
	Stage5
	{			
		State=Inactive
		OnStoryData:hell_tastemeat_yes,keep
		{
			RemoveArtifact=Titan_flesh_chunk2,1
			AddLoot=Titan_flesh_chunk
			SetStage=10
		}						
	}
	Stage10
	{
		State=Hidden
	}
}
Ch4_Hell2_fallen_acolyte
{
	Chapter=0
	Stage0
	{			
		State=Inactive
		OnStoryData:hell_acolyte_leave,keep
		{
			SetStage=10
		}						
		OnStoryData:hell_acolyte_kill,keep
		{
			SetStage=3
		}						
	}
	Stage3
	{			
		State=Inactive
		OnSet
		{
			SetPlayerFaction=terep_Pokol2,fallen_acolyte,1
			SetStage=10
		}						
	}
	Stage10
	{
		State=Hidden
	}
}
Ch4_Hell2_fallen_warlord
{
	Chapter=0
	Stage0
	{			
		State=Inactive
		OnStoryData:hell_warlord_leave,keep
		{
			SetStage=10
		}
		OnStoryData:hell_warlord_kill,keep
		{
			SetStage=4
		}
	}
	Stage4
	{			
		State=Inactive
		OnSet
		{
			SetPlayerFaction=terep_Pokol2,fallen_warlord,1
			SetStage=10
		}						
	}
	Stage10
	{
		State=Hidden
	}
}
Ch4_Hell2_fallen_hunter
{
	Chapter=0
	Stage0
	{			
		State=Inactive
		OnStoryData:hell_hunter_leave,keep
		{
			SetStage=10
		}
		OnStoryData:hell_hunter_kill,keep
		{
			SetStage=5
		}
	}
	Stage5
	{			
		State=Inactive
		OnSet
		{
			SetPlayerFaction=terep_Pokol2,fallen_hunter,1
			SetStage=10
		}						
	}
	Stage10
	{
		State=Hidden
	}
}

Ch7_A_szakacs
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_ink_tukor_varos
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:fozelek_consumable,keep
		{
			AddLoot=Domovoy_Steak_loot,terep_ink_tukor_varos,szakacs_location,dummy
			SetStage=10
		}
		OnStoryData:turoscsusza_consumable,keep
		{
			AddLoot=Vrikolak_Pie_loot,terep_ink_tukor_varos,szakacs_location,dummy
			SetStage=10
		}
		OnStoryData:rantotthus_consumable,keep
		{
			AddLoot=Vodyanoy_Haggis_loot,terep_ink_tukor_varos,szakacs_location,dummy
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}

Ch7_Dragontooth
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_ink_csont
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:Dragontooth_dropable,keep
		{
			AddLoot=Dragon_tooth,terep_ink_csont,dragontooth_location,dummy
			SetStage=10
		}
	}
	Stage10
	{
		State=Inactive
		OnItemGot:Dragon_tooth
		{
			AddStoryData=Dragontooth_dialog_done
			SetStage=15
		}
	}
	Stage15
	{
		State=Hidden
	}
}
 
Ch7_Hidden_rock
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnMapChanged:terep_ink_quarry
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:hidden_rock_activate,keep
		{
			AddLoot=KisEssence_fixen,terep_ink_quarry,epic_rune_loot_location,dummy
			AddLoot=Essence_tizenotodik_szint,terep_ink_quarry,epic_rune_loot_location,dummy
			AddLoot=KisEssence_fixen,terep_ink_quarry,epic_rune_loot_location,dummy
			AddLoot=Essence_tizenotodik_szint,terep_ink_quarry,epic_rune_loot_location,dummy
			AddLoot=KisEssence_fixen,terep_ink_quarry,epic_rune_loot_location,dummy
			AddLoot=Essence_tizenotodik_szint,terep_ink_quarry,epic_rune_loot_location,dummy
			SetStage=10
		}
	}
	Stage10
	{
		State=Hidden
	}
}

Ch4_Quest_of_mystic_ring
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Ring_of_message_taken,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnStoryData:Idol_tapi_done,keep
		{
			SetVariable=Ring_command_done,1,add
		}
		OnStoryData:Third_message_unlocked,keep
		{
			EnableTrigger=terep_city_1_csatorna,Message_ring_trigger,true
		}
		OnStoryData:Third_command_completed,keep
		{
			SetVariable=Ring_command_done,1,add
		}
		OnStoryData:Fourth_message_unlocked,keep
		{
			SpawnMonster=wraith_minion,poksz_wraith_minion,terep_poksziklak,wraith_location1,wraith_of_ring
			SpawnMonster=wraith_minion,poksz_wraith_minion,terep_poksziklak,wraith_location2,wraith_of_ring
			SpawnMonster=wraith_minion,poksz_wraith_minion,terep_poksziklak,wraith_location3,wraith_of_ring
			SpawnMonster=wraith_minion,poksz_wraith_minion,terep_poksziklak,wraith_location4,wraith_of_ring
			SpawnMonster=wraith_boss,poksz_wraith_boss,terep_poksziklak,wraith_location5,wraith_of_ring
		}
		OnSoldierKilledName:poksz_wraith_minion,terep_poksziklak
		{
			CountSoldiers=terep_poksziklak,poksz_wraith_minion,wraith_minion_remaining,name
		}
		OnVariableChanged:wraith_minion_remaining,0
		{
			HasStoryData:Fifth_message_unlocked,equal,1
			{
				SetPlayerFaction=terep_poksziklak,wraith_of_ring,-1
				SetVariable=Ring_command_done,1,add
			}
		}
		OnSoldierKilledName:poksz_wraith_boss,terep_poksziklak
		{
			SetStage=15
		}
		OnVariableChanged:Ring_command_done,3
		{
			AddStoryData=Ring_gate_is_available
		}
		OnStoryData:secret_ring_door_opened,keep
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Inactive
		OnSet
		{
			EnableEntrance=terep_poksziklak,Inkportal_gyuru_oda,true
			EnableEntrance=terep_poksziklak,Inkportal_gyuru_vissza,true
			SetStage=15
		}
	}
	Stage15
	{
		State=Hidden
	}
}
Ch3_After_Dark_ritual
{
	Chapter=0
	Stage0
	{
		State=Inactive
		OnStoryData:Dark_ritual_quest_continue,keep
		{
			SetStage=5
		}
	}
	Stage5
	{
		State=Inactive
		OnSet
		{
			EnableTrigger=terep_Belvaros,Necromancer_ambush,true
		}
		OnStoryData:Necromancer_ambush,keep
		{
			SetStage=10
		}
	}
	Stage10
	{
		State=Inactive
		OnSet
		{
			SpawnMonster=Necromancer_leader,DLC_Necromancer_leader,terep_Belvaros,Ambush_position
			SpawnMonster=ghoul_for_sacrifice,DLC_ghoul_for_sacrifice,terep_Belvaros,Ambush_position
			SpawnMonster=ghoul_for_sacrifice,DLC_ghoul_for_sacrifice,terep_Belvaros,Ambush_position
			SpawnMonster=ghoul_for_sacrifice,DLC_ghoul_for_sacrifice,terep_Belvaros,Ambush_position
			SpawnMonster=ghoul_for_sacrifice,DLC_ghoul_for_sacrifice,terep_Belvaros,Ambush_position
			SpawnMonster=ghoul_for_sacrifice,DLC_ghoul_for_sacrifice,terep_Belvaros,Ambush_position
			SpawnMonster=ghoul_for_sacrifice,DLC_ghoul_for_sacrifice,terep_Belvaros,Ambush_position
		}
		OnSoldierKilled:Necromancer_leader,terep_Belvaros
		{
			SetStage=15
		}
	}
	Stage15
	{
		State=Hidden
	}
	
}